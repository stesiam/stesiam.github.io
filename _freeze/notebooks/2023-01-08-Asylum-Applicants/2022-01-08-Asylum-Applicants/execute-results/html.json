{
  "hash": "a1d8ce86e407e8ce5f8d7b98a127ab6f",
  "result": {
    "markdown": "---\ntitle: \"Asylum applicants in Europe\"\nauthor: \"stesiam\"\ndescription: |\n  Create a Europe map based on the number of asylum applications per country.\ncategories: [R, Eurostat, EDA, Maps]\nimage: eu_image.jpg\nfreeze: true\nfig-cap-location: bottom\ndate: \"2023-01-08\"\ntoc: true\ntoc-title: Table of contents\ntoc-location: left\ncitation: true\nslug: stesiam2022\ntitle-block-banner: true\nnocite: '@*'\ncsl: apa-6th-edition\nbibliography: [packages.bib, references.bib]\nformat: \n  html:\n    code-link: true\n    code-fold: true\n    code-summary: \"Show the code\"\n    code-tools: \n      source: repo\nexecute:\n  echo: true\neditor_options: \n  markdown: \n    wrap: 80\n---\n\n\n# Table of Contents {.unlisted}\n\n<hr>\n\n1.  [Introduction](#introduction) <br>\n2.  [Prerequisites](#prerequisites) <br>   2.1 [Import\n    Libraries](#import-libraries) <br>   2.2 [Import Dataset](#import-dataset)\n    <br>   2.3 [Preview Dataset](#preview-dataset) <br>\n3.  [Descriptive Statistics](#descriptive-statistics) <br>\n4.  [Making Map](#making-map) <br>   4.1 [Shapefile](#shapefile) <br>   4.2\n    [Visualization](#visualization) <br>\n5.  [References](#references)\n\n<hr>\n\n# Introduction {#introduction}\n\n# Prerequisites {#prerequisites}\n\n## Import Libraries {#import-libraries}\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# General purpose R libraries\nlibrary(dplyr)\nlibrary(readr)\nlibrary(kableExtra)\n\n# Data packages\n\nlibrary(eurostat)\n\n# Packages for maps\n\nlibrary(ggplot2)\nlibrary(sf)\n```\n:::\n\n\n\n\nFor this analysis we will need standard libraries for importing and processing\nmy data, such as readr [@R-readr] and dplyr [@R-dplyr]. The kableExtra\n[@R-kableExtra] package was used to print the results in table format. Also, I\nuse eurostat [@R-eurostat] package to analyze Eurostat data.\n\nIn order to make the visualization (map with asylum applicants) I will need (as\nalways) ggplot2 [@R-ggplot2] and sf [@R-sf].\n\n## Import dataset {#import-dataset}\n\nAfter loading the libraries I am able to use the commands of the readr package\nto import my data. My data is in .csv format, so I'll use the read_csv() command\n[@R-readr] to import them.\n\nAdditionally, I choose not to include EA-19 values (as I investigate Greece's\nunemployment).\n\n\n::: {.cell hash='2022-01-08-Asylum-Applicants_cache/html/Import dataset_c910af2e406b27fec397c18e8abca0fe'}\n\n```{.r .cell-code}\nasylum_applicants = read_csv(\"data/Asylum_applicants_EU_2021.csv\")\n\nasylum_applicants_time_series = read_csv(\"data/tps00191_linear.csv\")\n```\n:::\n\n\n## Preview Dataset {#preview-dataset}\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#| label: tbl-preview-dataset\n#| tbl-cap: \"Preview Dataset (first 6 rows)\"\n#| \npreview_dataset = head(asylum_applicants, 10)\nkbl(preview_dataset, \n    align = 'c',\n    booktabs = T,\n    centering = T,\n    valign = T) %>%\n  kable_paper() %>%\n  scroll_box(width = \"600px\", height = \"250px\")\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div style=\"border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:250px; overflow-x: scroll; width:600px; \"><table class=\" lightable-paper\" style='font-family: \"Arial Narrow\", arial, helvetica, sans-serif; margin-left: auto; margin-right: auto;'>\n <thead>\n  <tr>\n   <th style=\"text-align:center;position: sticky; top:0; background-color: #FFFFFF;\"> DATAFLOW </th>\n   <th style=\"text-align:center;position: sticky; top:0; background-color: #FFFFFF;\"> LAST UPDATE </th>\n   <th style=\"text-align:center;position: sticky; top:0; background-color: #FFFFFF;\"> freq </th>\n   <th style=\"text-align:center;position: sticky; top:0; background-color: #FFFFFF;\"> citizen </th>\n   <th style=\"text-align:center;position: sticky; top:0; background-color: #FFFFFF;\"> sex </th>\n   <th style=\"text-align:center;position: sticky; top:0; background-color: #FFFFFF;\"> unit </th>\n   <th style=\"text-align:center;position: sticky; top:0; background-color: #FFFFFF;\"> age </th>\n   <th style=\"text-align:center;position: sticky; top:0; background-color: #FFFFFF;\"> asyl_app </th>\n   <th style=\"text-align:center;position: sticky; top:0; background-color: #FFFFFF;\"> geo </th>\n   <th style=\"text-align:center;position: sticky; top:0; background-color: #FFFFFF;\"> TIME_PERIOD </th>\n   <th style=\"text-align:center;position: sticky; top:0; background-color: #FFFFFF;\"> OBS_VALUE </th>\n   <th style=\"text-align:center;position: sticky; top:0; background-color: #FFFFFF;\"> OBS_FLAG </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:center;\"> ESTAT:TPS00191(1.0) </td>\n   <td style=\"text-align:center;\"> 29/08/22 23:00:00 </td>\n   <td style=\"text-align:center;\"> A </td>\n   <td style=\"text-align:center;\"> EXT_EU27_2020 </td>\n   <td style=\"text-align:center;\"> TRUE </td>\n   <td style=\"text-align:center;\"> PER </td>\n   <td style=\"text-align:center;\"> TOTAL </td>\n   <td style=\"text-align:center;\"> ASY_APP </td>\n   <td style=\"text-align:center;\"> AT </td>\n   <td style=\"text-align:center;\"> 2021 </td>\n   <td style=\"text-align:center;\"> 39900 </td>\n   <td style=\"text-align:center;\"> NA </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> ESTAT:TPS00191(1.0) </td>\n   <td style=\"text-align:center;\"> 29/08/22 23:00:00 </td>\n   <td style=\"text-align:center;\"> A </td>\n   <td style=\"text-align:center;\"> EXT_EU27_2020 </td>\n   <td style=\"text-align:center;\"> TRUE </td>\n   <td style=\"text-align:center;\"> PER </td>\n   <td style=\"text-align:center;\"> TOTAL </td>\n   <td style=\"text-align:center;\"> ASY_APP </td>\n   <td style=\"text-align:center;\"> BE </td>\n   <td style=\"text-align:center;\"> 2021 </td>\n   <td style=\"text-align:center;\"> 24970 </td>\n   <td style=\"text-align:center;\"> NA </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> ESTAT:TPS00191(1.0) </td>\n   <td style=\"text-align:center;\"> 29/08/22 23:00:00 </td>\n   <td style=\"text-align:center;\"> A </td>\n   <td style=\"text-align:center;\"> EXT_EU27_2020 </td>\n   <td style=\"text-align:center;\"> TRUE </td>\n   <td style=\"text-align:center;\"> PER </td>\n   <td style=\"text-align:center;\"> TOTAL </td>\n   <td style=\"text-align:center;\"> ASY_APP </td>\n   <td style=\"text-align:center;\"> BG </td>\n   <td style=\"text-align:center;\"> 2021 </td>\n   <td style=\"text-align:center;\"> 11000 </td>\n   <td style=\"text-align:center;\"> NA </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> ESTAT:TPS00191(1.0) </td>\n   <td style=\"text-align:center;\"> 29/08/22 23:00:00 </td>\n   <td style=\"text-align:center;\"> A </td>\n   <td style=\"text-align:center;\"> EXT_EU27_2020 </td>\n   <td style=\"text-align:center;\"> TRUE </td>\n   <td style=\"text-align:center;\"> PER </td>\n   <td style=\"text-align:center;\"> TOTAL </td>\n   <td style=\"text-align:center;\"> ASY_APP </td>\n   <td style=\"text-align:center;\"> CH </td>\n   <td style=\"text-align:center;\"> 2021 </td>\n   <td style=\"text-align:center;\"> 14850 </td>\n   <td style=\"text-align:center;\"> NA </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> ESTAT:TPS00191(1.0) </td>\n   <td style=\"text-align:center;\"> 29/08/22 23:00:00 </td>\n   <td style=\"text-align:center;\"> A </td>\n   <td style=\"text-align:center;\"> EXT_EU27_2020 </td>\n   <td style=\"text-align:center;\"> TRUE </td>\n   <td style=\"text-align:center;\"> PER </td>\n   <td style=\"text-align:center;\"> TOTAL </td>\n   <td style=\"text-align:center;\"> ASY_APP </td>\n   <td style=\"text-align:center;\"> CY </td>\n   <td style=\"text-align:center;\"> 2021 </td>\n   <td style=\"text-align:center;\"> 13670 </td>\n   <td style=\"text-align:center;\"> NA </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> ESTAT:TPS00191(1.0) </td>\n   <td style=\"text-align:center;\"> 29/08/22 23:00:00 </td>\n   <td style=\"text-align:center;\"> A </td>\n   <td style=\"text-align:center;\"> EXT_EU27_2020 </td>\n   <td style=\"text-align:center;\"> TRUE </td>\n   <td style=\"text-align:center;\"> PER </td>\n   <td style=\"text-align:center;\"> TOTAL </td>\n   <td style=\"text-align:center;\"> ASY_APP </td>\n   <td style=\"text-align:center;\"> CZ </td>\n   <td style=\"text-align:center;\"> 2021 </td>\n   <td style=\"text-align:center;\"> 1405 </td>\n   <td style=\"text-align:center;\"> NA </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> ESTAT:TPS00191(1.0) </td>\n   <td style=\"text-align:center;\"> 29/08/22 23:00:00 </td>\n   <td style=\"text-align:center;\"> A </td>\n   <td style=\"text-align:center;\"> EXT_EU27_2020 </td>\n   <td style=\"text-align:center;\"> TRUE </td>\n   <td style=\"text-align:center;\"> PER </td>\n   <td style=\"text-align:center;\"> TOTAL </td>\n   <td style=\"text-align:center;\"> ASY_APP </td>\n   <td style=\"text-align:center;\"> DE </td>\n   <td style=\"text-align:center;\"> 2021 </td>\n   <td style=\"text-align:center;\"> 190545 </td>\n   <td style=\"text-align:center;\"> NA </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> ESTAT:TPS00191(1.0) </td>\n   <td style=\"text-align:center;\"> 29/08/22 23:00:00 </td>\n   <td style=\"text-align:center;\"> A </td>\n   <td style=\"text-align:center;\"> EXT_EU27_2020 </td>\n   <td style=\"text-align:center;\"> TRUE </td>\n   <td style=\"text-align:center;\"> PER </td>\n   <td style=\"text-align:center;\"> TOTAL </td>\n   <td style=\"text-align:center;\"> ASY_APP </td>\n   <td style=\"text-align:center;\"> DK </td>\n   <td style=\"text-align:center;\"> 2021 </td>\n   <td style=\"text-align:center;\"> 2080 </td>\n   <td style=\"text-align:center;\"> NA </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> ESTAT:TPS00191(1.0) </td>\n   <td style=\"text-align:center;\"> 29/08/22 23:00:00 </td>\n   <td style=\"text-align:center;\"> A </td>\n   <td style=\"text-align:center;\"> EXT_EU27_2020 </td>\n   <td style=\"text-align:center;\"> TRUE </td>\n   <td style=\"text-align:center;\"> PER </td>\n   <td style=\"text-align:center;\"> TOTAL </td>\n   <td style=\"text-align:center;\"> ASY_APP </td>\n   <td style=\"text-align:center;\"> EE </td>\n   <td style=\"text-align:center;\"> 2021 </td>\n   <td style=\"text-align:center;\"> 80 </td>\n   <td style=\"text-align:center;\"> NA </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;\"> ESTAT:TPS00191(1.0) </td>\n   <td style=\"text-align:center;\"> 29/08/22 23:00:00 </td>\n   <td style=\"text-align:center;\"> A </td>\n   <td style=\"text-align:center;\"> EXT_EU27_2020 </td>\n   <td style=\"text-align:center;\"> TRUE </td>\n   <td style=\"text-align:center;\"> PER </td>\n   <td style=\"text-align:center;\"> TOTAL </td>\n   <td style=\"text-align:center;\"> ASY_APP </td>\n   <td style=\"text-align:center;\"> EL </td>\n   <td style=\"text-align:center;\"> 2021 </td>\n   <td style=\"text-align:center;\"> 28355 </td>\n   <td style=\"text-align:center;\"> NA </td>\n  </tr>\n</tbody>\n</table></div>\n\n`````\n:::\n:::\n\n\n# Descriptive Statistics {#descriptive-statistics}\n\n\n::: {.cell}\n\n```{.r .cell-code}\nasylum_df = asylum_applicants %>% select(geo, OBS_VALUE)\n\nasylum_df %>% \n  as.data.frame() %>% \n  arrange(-OBS_VALUE) %>%\n  head(7)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n        geo OBS_VALUE\n1 EU27_2020    632315\n2        DE    190545\n3        FR    120685\n4        ES     65295\n5        IT     53610\n6        AT     39900\n7        EL     28355\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nasylum_applicants_time_series %>% \n  filter(asyl_app == \"NASY_APP\") %>% \n  filter(geo == \"EL\") %>% \n  select(TIME_PERIOD, OBS_VALUE) %>% \n  ggplot(., aes(x = TIME_PERIOD, y = OBS_VALUE)) + \n   geom_line() + \n   geom_point() +\n   geom_text(aes(label = OBS_VALUE, y = OBS_VALUE + 3500)) +\n   labs(\n    title = \"First time Asylum Applicants in Greece\",\n    x = \"Year\",\n    y = \"Observation\"\n   ) +\n  ylim(0,100000) +\n   theme_classic()\n```\n\n::: {.cell-output-display}\n![](2022-01-08-Asylum-Applicants_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\n# Making Map {#making-map}\n\n## Shapefile {#shapefile}\n\n\n::: {.cell}\n\n```{.r .cell-code}\nSHP_0 <- get_eurostat_geospatial(resolution = 10, \n                                 nuts_level = 0, \n                                 year = 2016)\n\nSHP_0 %>% \n  ggplot() +\n  geom_sf()\n```\n\n::: {.cell-output-display}\n![](2022-01-08-Asylum-Applicants_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\n## Visualization {#visualization}\n\n\n::: {.cell}\n\n```{.r .cell-code}\nEU27 <- eu_countries %>% \n  filter(code != 'UK') %>% \n  select(geo = code, name)\n\nSHP_27 <- SHP_0 %>% \n  select(geo = NUTS_ID, geometry) %>% \n  inner_join(EU27, by = \"geo\") %>% \n  arrange(geo) %>% \n  st_as_sf()\n\nSHP_27 %>% \n  ggplot(fill = values) +\n  geom_sf() +\n  scale_x_continuous(limits = c(-10, 35)) +\n  scale_y_continuous(limits = c(35, 65)) +\n    labs(\n    title = \"Asylum Applicants (2021)\",\n    subtitle = \"Annual % of change, 2020 vs 2019\",\n    caption = \"Data: Eurostat\"\n  ) +\n  theme_void() +\n  theme(\n    legend.position = c(0.97, 0.50)\n  )\n```\n\n::: {.cell-output-display}\n![](2022-01-08-Asylum-Applicants_files/figure-html/unnamed-chunk-5-1.png){width=960}\n:::\n:::\n\n\n# Asylum Applicants (Total)\n\n\n::: {.cell}\n\n```{.r .cell-code}\nasylum_applicants_shp = asylum_applicants %>%\n  select(geo, OBS_VALUE) %>%\n  inner_join(SHP_27, by = \"geo\") %>% \n  st_as_sf()\n#asylum_applicants_shp\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nasylum_applicants_shp  %>% \n  ggplot(aes(fill = OBS_VALUE)) +\n  geom_sf() +\n  geom_sf_text(aes(label = floor((OBS_VALUE)/1000)),\n             colour = \"black\", \n             size = 6,\n             family=\"Liberation Serif\") +\n  # scale_fill_distiller(\n  #   palette = 13,\n  #   direction = 1   # reverse default order\n  # ) +\n  scale_fill_gradient(low='white', high='grey60') +\n  scale_x_continuous(limits = c(-10, 35)) +\n  scale_y_continuous(limits = c(35, 65)) +\n  theme_void() +\n    labs(\n    title = \"Asylum Applicants (2021)\",\n    subtitle = \"Total applications of people seeking for asylum in EU (in thousands) \",\n    caption = \"Data: Eurostat\",\n    fill = \"Observed\"\n  ) +\n  theme_void() +\n  theme(\n    legend.position = c(0.97, 0.50),\n    text=element_text(size=16,  family=\"Liberation Serif\")\n    )\n```\n\n::: {.cell-output-display}\n![](2022-01-08-Asylum-Applicants_files/figure-html/unnamed-chunk-7-1.png){width=960}\n:::\n:::\n\n\n# Asylum Applicants (New)\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata <- read_csv(\"data/tps00191_linear.csv\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndata_nasy = data %>%\n  select(asyl_app, OBS_VALUE, geo, TIME_PERIOD) %>%\n  filter(asyl_app == \"NASY_APP\") %>%\n  filter(TIME_PERIOD == \"2021\") %>%\n  filter(asyl_app == \"NASY_APP\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nasylum_applicants_shp = data_nasy %>%\n  select(geo, OBS_VALUE) %>%\n  inner_join(SHP_27, by = \"geo\") %>% \n  st_as_sf()\n#asylum_applicants_shp\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nasylum_applicants_shp  %>% \n  ggplot(aes(fill = OBS_VALUE)) +\n  geom_sf() +\n  geom_sf_text(aes(label = floor(OBS_VALUE/1000)),\n             colour = \"black\", \n             size = 6,\n             family=\"Liberation Serif\") +\n  # scale_fill_distiller(\n  #   palette = 13,\n  #   direction = 1   # reverse default order\n  # ) +\n  scale_fill_gradient(low='white', high='#bec201') +\n  scale_x_continuous(limits = c(-10, 35)) +\n  scale_y_continuous(limits = c(35, 65)) +\n  theme_void() +\n    labs(\n    title = \"Asylum Applicants (2021)\",\n    subtitle = \"Total applications of people seeking for asylum in EU (in thousands) \",\n    caption = \"Data: Eurostat\",\n    fill = \"Observed\"\n  ) +\n  theme_void() +\n  theme(\n    legend.position = c(0.97, 0.50),\n    text=element_text(size=16,  family=\"Liberation Serif\")\n    )\n```\n\n::: {.cell-output-display}\n![](2022-01-08-Asylum-Applicants_files/figure-html/unnamed-chunk-11-1.png){width=960}\n:::\n:::\n\n\n# Asylum applicants (Subsequent applicants)\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata_sseq = data %>%\n  select(asyl_app, OBS_VALUE, geo, TIME_PERIOD) %>%\n  filter(asyl_app == \"SSEQ\") %>%\n  filter(TIME_PERIOD == \"2021\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nasylum_applicants_shp = data_sseq %>%\n  select(geo, OBS_VALUE) %>%\n  inner_join(SHP_27, by = \"geo\") %>% \n  st_as_sf()\n#asylum_applicants_shp\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nasylum_applicants_shp  %>% \n  ggplot(aes(fill = OBS_VALUE)) +\n  geom_sf() +\n  geom_sf_text(aes(label = floor(OBS_VALUE/1000)),\n             colour = \"black\", \n             size = 6,\n             family=\"Liberation Serif\") +\n  # scale_fill_distiller(\n  #   palette = 13,\n  #   direction = 1   # reverse default order\n  # ) +\n  scale_fill_gradient(low='white', high='#efc102') +\n  scale_x_continuous(limits = c(-10, 35)) +\n  scale_y_continuous(limits = c(35, 65)) +\n  theme_void() +\n    labs(\n    title = \"Asylum Applicants (2021)\",\n    subtitle = \"Total applications of people seeking for asylum in EU (in thousands) \",\n    caption = \"Data: Eurostat\",\n    fill = \"Observed\"\n  ) +\n  theme_void() +\n  theme(\n    legend.position = c(0.97, 0.50),\n    text=element_text(size=16,  family=\"Liberation Serif\")\n    )\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning in st_point_on_surface.sfc(sf::st_zm(x)): st_point_on_surface may not\ngive correct results for longitude/latitude data\n```\n:::\n\n::: {.cell-output-display}\n![](2022-01-08-Asylum-Applicants_files/figure-html/unnamed-chunk-14-1.png){width=960}\n:::\n:::\n\n\n# Asylum Applicants per 1000 inhabitants\n\n\n::: {.cell}\n\n```{.r .cell-code}\npop <- read_csv(\"data/tps00001_linear.csv\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\noptions(scipen=999)\npop = pop %>%\n  select(geo, TIME_PERIOD, OBS_VALUE) %>%\n  filter(TIME_PERIOD == 2021)\n\nasylum = asylum_applicants %>%\n  select(geo, TIME_PERIOD, OBS_VALUE)\n\nnew = merge(pop, asylum, by = \"geo\") %>%\n  mutate(perc = (OBS_VALUE.y/ OBS_VALUE.x)*100)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nasylum_applicants_shp = new %>%\n  select(geo, perc) %>%\n  inner_join(SHP_27, by = \"geo\") %>% \n  st_as_sf()\n#asylum_applicants_shp\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\noptions(digits = 2)\nasylum_applicants_shp  %>% \n  ggplot(aes(fill = perc)) +\n  geom_sf() +\n  geom_sf_text(aes(label = sprintf(\"%.2f\", perc)),\n             colour = \"black\", \n             size = 6,\n             family=\"Liberation Serif\") +\n  # scale_fill_distiller(\n  #   palette = 13,\n  #   direction = 1   # reverse default order\n  # ) +\n  scale_fill_gradient(low='white', high='grey60') +\n  scale_x_continuous(limits = c(-10, 35)) +\n  scale_y_continuous(limits = c(35, 65)) +\n  theme_void() +\n    labs(\n    title = \"Asylum Applicants (2021)\",\n    subtitle = \"Total applications of people seeking for asylum in EU (in thousands) \",\n    caption = \"Data: Eurostat\",\n    fill = \"Observed\"\n  ) +\n  theme_void() +\n  theme(\n    legend.position = c(0.97, 0.50),\n    text=element_text(size=16,  family=\"Liberation Serif\")\n    )\n```\n\n::: {.cell-output-display}\n![](2022-01-08-Asylum-Applicants_files/figure-html/unnamed-chunk-18-1.png){width=960}\n:::\n:::\n\n\n# Unaccompanied minors\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata_minors <- read_csv(\"data/tps00194_linear.csv\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndata_minors = data_minors %>%\n  select(OBS_VALUE, geo, TIME_PERIOD) %>%\n  filter(TIME_PERIOD == \"2021\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nasylum_applicants_shp = data_minors %>%\n  select(geo, OBS_VALUE) %>%\n  inner_join(SHP_27, by = \"geo\") %>% \n  st_as_sf()\n#asylum_applicants_shp\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nasylum_applicants_shp  %>% \n  ggplot(aes(fill = OBS_VALUE)) +\n  geom_sf() +\n  geom_sf_text(aes(label = OBS_VALUE),\n             colour = \"black\", \n             size = 5,\n             family=\"Liberation Serif\") +\n  # scale_fill_distiller(\n  #   palette = 13,\n  #   direction = 1   # reverse default order\n  # ) +\n  scale_fill_gradient(low='white', high='#abe300') +\n  scale_x_continuous(limits = c(-10, 35)) +\n  scale_y_continuous(limits = c(35, 65)) +\n  theme_void() +\n    labs(\n    title = \"Asylum Applicants (2021)\",\n    subtitle = \"Total applications of people seeking for asylum in EU (in thousands) \",\n    caption = \"Data: Eurostat\",\n    fill = \"Observed\"\n  ) +\n  theme_void() +\n  theme(\n    legend.position = c(0.97, 0.50),\n    text=element_text(size=13,  family=\"Liberation Serif\")\n    )\n```\n\n::: {.cell-output-display}\n![](2022-01-08-Asylum-Applicants_files/figure-html/unnamed-chunk-22-1.png){width=864}\n:::\n:::\n\n\n# Acknowledgements {.appendix .unlisted}\n\nImage by <a href=\"https://pixabay.com/users/fotoworkshop4you-2995268/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=1555348\">Martin Winkler</a> from <a href=\"https://pixabay.com//?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=1555348\">Pixabay</a>\n\n# References {#references .appendix .unlisted}\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../../site_libs/kePrint-0.0.1/kePrint.js\"></script>\n<link href=\"../../site_libs/lightable-0.0.1/lightable.css\" rel=\"stylesheet\" />\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}