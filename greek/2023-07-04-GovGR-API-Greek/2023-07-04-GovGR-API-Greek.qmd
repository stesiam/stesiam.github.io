---
title: "Πρόσβαση στο API του data.gov.gr"
author: "stesiam"
description: "Ένας απλός οδηγός χρήσης του API του data.gov.gr, ώστε να λαμβάνετε τη ροή δεδομένων με τη χρήση της R."
categories: [R, API]
fig-cap-location: bottom
date: "2023-07-04"
freeze: true
bibliography: [references.bib]
toc: true
toc-title: Περιεχόμενα
toc-location: left
title-block-banner: true
nocite: '@*'
format: 
  html:
    freeze: true
    code-link: true
execute:
  echo: true
editor_options: 
  markdown: 
    wrap: 80
---

```{r, include =FALSE}
library(here)
here::here("greek/2023-07-01-GovGR-API-Greek")
```

## Εισαγωγή

Στην παραδοσιακή ανάλυση δεδομένων συνήθως ο αναλυτής καλείται να
\<<καθαρίσει>\> τα δεδομένα, να τους δώσει μία κατάλληλη μορφή πορκειμένου να
αναλυθούν. Αυτή η δαιδικασία υπονοεί ότι τα δεδομένα υπάρχουν συγκεντρωμένα σε
ένα αρχείο. Ωστόσο, δεν είναι πάντα έτσι. Το πρόβλημα με την ανάλυση ενός
dataset είναι ότι δεν λαμβάνει υπόψιν τις όποιες νέες τιμές. Σε αυτή τη
περίπτωση θα πρέπει να ξανακατβάσω τα νέα δεδομένα και να ξανατρέξω την ανάλυση
μέσω της R ή όποιου εργαλείου χρησιμοποιώ. Αυτό όπως γίνεται αντιληπτό είναι μη
παραγωγικό, ωστόσο όταν γίνεται λίγες φορές μέσα στο χρόνο, ίσως να μην είναι
και τόσο . Εκεί που πλέον γίνεται εμφανής η μη αποτελεσματικότητα της παραπάνω
διαδικασίας είναι όταν υπάρχει συνεχής ροή δεδομένων, άρα πρέπει να γίνεται αυτή
η διαδικασία καθημερινά. Σε αυτές τις περιπτώσεις φαίνεται η χρησιμότητα του API
αφού μας δίνει τις νέες τιμές με μικρό σχετικά κόπο. Παράλληλα η χρήση του API
ευνοεί την ένατξη νέων δεδομένων, συνεπώς αν φτιάχουμε ένα προβλεπτικό μοντέλο η
ακρίβειά του θα παραμένει σε ένα ικανοποιητικό επίπεδο. Τέλος, άλλη μία θετική
συμβολή είναι σε Shiny Apps, προκειμένου να αυτοματοποιείται η ανάλυση δεδομένων
και οι πληροφορίες να είναι αξιόπιστες για τον επισκέπτη αυτού.

Γενικά υπάρχουν πάρα πολλά API από τα οποία μπορούμε να λάβουμε σημαντικές
πληροφορίες. Για περισσότερες λεπτομέρειες ως προς τη διαθεσιμότητα δωρεάν APIs
μπορείτε να δείτε ένα σχετικό [repository με μία λίστα
αυτών](https://github.com/public-apis/public-apis). Σε αυτό το άρθρο θα
ασχοληθούμε με τα ανοικτά δεδομένα της χώρας μας που διατίθενται μέσω του
[data.gov.gr](data.gov.gr).

## Αίτηση για API Key

Ωστόσο, το συγκεκριμένο API (όπως τα περισσότερα χρειάζονται

Κάνουμε άιτηση στην αντίστοιχη σελίδα και συμπληρώνουμε τα στοιχεία μας και
**όλα** τα πεδία της φόρμας όπως αυτή φαίνεται παρακάτω:

![Προεπισκόπηση σελίδας αίτησης για πρόσβαση στο
API](images/datagovgr_api_request.png){style="text-align:center; background-color: #fafafa; padding: 20px"
width="500"}

Στη συνέχεια θα πρέπει να κοιτάξετε το e-mail σας γιατί θα σας έρθει ένα μήνυμα
με τον Token μέσω του οποίου θα χρησιμοποιείται το API. Να δείτε οπωσδήποτε και
τον φάκελο με την Ανεπιθύμητη αλληλογραφία (spam) καθώς εμένα μου ήρθε εκεί.
Παρεπιπτόντως, σε περίπτωση που χάσετε το token και έχετε σβήσει το mail και
ξανακάνετε αίτηση (με το ίδιο mail) θα σας το ξαναστείλει. Το έπαθα μόλις :)

## Χρήση API

Αφού λάβουμε το Token, θα πρέπει με κάποιο τρόπο να λάβουμε τα δεδομένα. Στην συγκεκριμένη πλατφόρμα υπάρχουν δύο τρόποι. 

- Χρήση API από την ιστοσελίδα: 
- Χρήση API με την R

Ο ένας τρόπος (και μάλλον ο λιγότερο αποδοτικός) είναι να κάνεις ζητήσεις τα δεδομένα απευθείας από την ιστοσελίδα data.gov.gr. Αυτό είναι από τη μία εξαιρετικά απλό, αλλά από την άλλη κατεβάζουμε μία σταθερή εκδοση των δεδομένων και συνεπώς αν θελήσω να ανανεώσω τα δεδομένα θα πρέπει πάλι να κατεβάσω τα δεδομένα. 



## Παράδειγμα χρήσης

Πριν ολοκληρωθεί αυτό το άρθρο έκρινα ως σημαντική την εφαρμηγή ενός
παραδέιγαμτος. Τη στιγμή που γράφεται αυτό το άρθρο, υπάρχουν συνολικά 49 βάσεις
δεδομένων από τις οποίες μπορώ να επιλέξω. Προκειμένου να δούμε την ωφέλεια του
API θα διαλέξω κάποιο που ανανεώνεται σε αρκετά συχνή βάση. Ένα τέτοιο δεδομένο
είναι οι επιβάτες που ταξιδεύουν με πλοία.

```{r}
library(httr)
library(jsonlite)
```



