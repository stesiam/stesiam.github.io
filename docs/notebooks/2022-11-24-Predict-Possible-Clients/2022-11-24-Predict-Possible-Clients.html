<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.253">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="author" content="stesiam">
<meta name="dcterms.date" content="2022-11-24">
<meta name="description" content="Build a classification machine learning model (using LightGBM &amp; XGBoost) in order to classify people based on their interest to have a term deposit or not.">
<title>stesiam - Predict Possible Interested Clients</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../Rplot1.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": true,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script><script src="../../site_libs/quarto-diagram/mermaid.min.js"></script><script src="../../site_libs/quarto-diagram/mermaid-init.js"></script><link href="../../site_libs/quarto-diagram/mermaid.css" rel="stylesheet">
<script src="../../site_libs/kePrint-0.0.1/kePrint.js"></script><link href="../../site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<script>window.backupDefine = window.define; window.define = undefined;</script><script src="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js"></script><script>document.addEventListener("DOMContentLoaded", function () {
 var mathElements = document.getElementsByClassName("math");
 var macros = [];
 for (var i = 0; i < mathElements.length; i++) {
  var texText = mathElements[i].firstChild;
  if (mathElements[i].tagName == "SPAN") {
   katex.render(texText.data, mathElements[i], {
    displayMode: mathElements[i].classList.contains('display'),
    throwOnError: false,
    macros: macros,
    fleqn: false
   });
}}});
  </script><script>window.define = window.backupDefine; window.backupDefine = undefined;</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css">
<link rel="stylesheet" href="../../styles.css">
<meta property="og:title" content="stesiam - Predict Possible Interested Clients">
<meta property="og:description" content="Build a classification machine learning model (using LightGBM &amp; XGBoost) in order to classify people based on their interest to have a term deposit or not.">
<meta property="og:image" content="https://www.stesiam.github.io/notebooks/2022-11-24-Predict-Possible-Clients/client_predict.jpg">
<meta property="og:site-name" content="stesiam">
</head>
<body class="floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="navbar navbar-expand-lg navbar-dark "><div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">stesiam</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
<li class="nav-item">
    <a class="nav-link" href="../../index.html">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../posts.html">
 <span class="menu-text">All Posts</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../notebooks.html">
 <span class="menu-text">ML Notebooks</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../shiny.html">
 <span class="menu-text">Shiny Projects</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../blog.html">
 <span class="menu-text">Blog</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../greek.html">
 <span class="menu-text">Greek Posts</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../index.html">
 <span class="menu-text">CV</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/stesiam"><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="../../posts.xml"><i class="bi bi-rss" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
<div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav></header><!-- content --><header id="title-block-header" class="quarto-title-block default toc-left page-columns page-full"><div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <div class="quarto-title-block"><div><h1 class="title">Predict Possible Interested Clients</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button" data-quarto-source-url="https://github.com/stesiam/stesiam.github.io/blob/main/notebooks/2022-11-24-Predict-Possible-Clients/2022-11-24-Predict-Possible-Clients.qmd">View Source</a></li></ul></div></div>
                  <div>
        <div class="description">
          <p>Build a classification machine learning model (using LightGBM &amp; XGBoost) in order to classify people based on their interest to have a term deposit or not.</p>
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">R</div>
                <div class="quarto-category">Classification</div>
                <div class="quarto-category">Tidymodels</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>stesiam </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">November 24, 2022</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto"><nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Table of contents</h2>
   
  <ul>
<li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li>
<a href="#prerequisites" id="toc-prerequisites" class="nav-link" data-scroll-target="#prerequisites">Prerequisites</a>
  <ul class="collapse">
<li><a href="#import-libraries" id="toc-import-libraries" class="nav-link" data-scroll-target="#import-libraries">Import libraries</a></li>
  <li><a href="#import-dataset" id="toc-import-dataset" class="nav-link" data-scroll-target="#import-dataset">Import dataset</a></li>
  <li><a href="#preview-dataset" id="toc-preview-dataset" class="nav-link" data-scroll-target="#preview-dataset">Preview dataset</a></li>
  <li><a href="#dataset-structure" id="toc-dataset-structure" class="nav-link" data-scroll-target="#dataset-structure">Dataset structure</a></li>
  <li><a href="#custom-functions" id="toc-custom-functions" class="nav-link" data-scroll-target="#custom-functions">Custom functions</a></li>
  </ul>
</li>
  <li>
<a href="#eda-with-r" id="toc-eda-with-r" class="nav-link" data-scroll-target="#eda-with-r">EDA with R</a>
  <ul class="collapse">
<li><a href="#missing-values" id="toc-missing-values" class="nav-link" data-scroll-target="#missing-values">Missing Values</a></li>
  <li>
<a href="#univariate-analysis" id="toc-univariate-analysis" class="nav-link" data-scroll-target="#univariate-analysis">Univariate analysis</a>
  <ul class="collapse">
<li><a href="#qualitative-variables" id="toc-qualitative-variables" class="nav-link" data-scroll-target="#qualitative-variables">Qualitative variables</a></li>
  <li><a href="#quantitative-variables" id="toc-quantitative-variables" class="nav-link" data-scroll-target="#quantitative-variables">Quantitative variables</a></li>
  </ul>
</li>
  <li>
<a href="#bivariate-analysis" id="toc-bivariate-analysis" class="nav-link" data-scroll-target="#bivariate-analysis">Bivariate analysis</a>
  <ul class="collapse">
<li><a href="#qualitative-variables-1" id="toc-qualitative-variables-1" class="nav-link" data-scroll-target="#qualitative-variables-1">Qualitative variables</a></li>
  <li><a href="#quantitative-variables-1" id="toc-quantitative-variables-1" class="nav-link" data-scroll-target="#quantitative-variables-1">Quantitative variables</a></li>
  </ul>
</li>
  </ul>
</li>
  <li>
<a href="#building-model" id="toc-building-model" class="nav-link" data-scroll-target="#building-model">Building model</a>
  <ul class="collapse">
<li><a href="#split-traintest-dataset" id="toc-split-traintest-dataset" class="nav-link" data-scroll-target="#split-traintest-dataset">Split train/test dataset</a></li>
  <li><a href="#recipes" id="toc-recipes" class="nav-link" data-scroll-target="#recipes">Recipes</a></li>
  <li><a href="#create-validation-set" id="toc-create-validation-set" class="nav-link" data-scroll-target="#create-validation-set">Create validation set</a></li>
  <li><a href="#specify-models" id="toc-specify-models" class="nav-link" data-scroll-target="#specify-models">Specify models</a></li>
  <li><a href="#hyperparameters-tuning" id="toc-hyperparameters-tuning" class="nav-link" data-scroll-target="#hyperparameters-tuning">Hyperparameters tuning</a></li>
  <li><a href="#fit-resamples" id="toc-fit-resamples" class="nav-link" data-scroll-target="#fit-resamples">Fit resamples</a></li>
  <li><a href="#evaluate-model" id="toc-evaluate-model" class="nav-link" data-scroll-target="#evaluate-model">Evaluate model</a></li>
  <li><a href="#last-fit" id="toc-last-fit" class="nav-link" data-scroll-target="#last-fit">Last fit</a></li>
  </ul>
</li>
  <li><a href="#results" id="toc-results" class="nav-link" data-scroll-target="#results">Results</a></li>
  </ul><div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/stesiam/stesiam.github.io/edit/main/notebooks/2022-11-24-Predict-Possible-Clients/2022-11-24-Predict-Possible-Clients.qmd" class="toc-action">Edit this page</a></p><p><a href="https://github.com/stesiam/stesiam.github.io/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
</nav><!-- margin-sidebar --><div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content"><section id="table-of-contents" class="level1 unlisted"><h1 class="unlisted">Table of Contents</h1>
<ol type="1">
<li><a href="#introduction">Introduction</a></li>
<li>
<a href="#prerequisites">Prerequisites</a> <br> &nbsp; 2.1 <a href="#import-libraries">Import Libraries</a> <br> &nbsp; 2.2 <a href="#import-dataset">Import Dataset</a> <br> &nbsp; 2.3 <a href="#preview-dataset">Preview Dataset</a> <br> &nbsp; 2.4 <a href="#dataset-structure">Dataset Structure</a> <br> &nbsp; 2.5 <a href="#custom-functions">Custon Functions</a> <br>
</li>
<li>
<a href="#eda-with-r">EDA with R</a> <br> &nbsp; 3.1 <a href="#missing-values">Missing Values</a> <br> &nbsp; 3.2 <a href="#univariate-analysis">Univariate Analysis</a> <br> &nbsp; &nbsp; &nbsp; 3.2.1 <a href="#qualitative-variables">Qualitative variables</a> <br> &nbsp; &nbsp; &nbsp; 3.2.2 <a href="#quantitative-variables">Quantitative variables</a> <br> &nbsp; 3.3 <a href="#bivariate-analysis">Bivariate Analysis</a> <br> &nbsp; &nbsp; &nbsp; 3.3.1 <a href="#qualitative-variables-1">Qualitative variables</a> <br> &nbsp; &nbsp; &nbsp; 3.3.2 <a href="#quantitative-variables-1">Quantitative variables</a> <br>
</li>
<li>
<a href="#building-model">Building Model</a> <br> &nbsp; 4.1 <a href="#split-train-test-dataset">Split train/test Dataset</a> <br> &nbsp; 4.2 <a href="#recipes">Recipes</a> <br> &nbsp; 4.3 <a href="#create-validation-set">Create Validation Set</a> <br> &nbsp; 4.4 <a href="#specify-models">Specify Models</a> <br> &nbsp; 4.5 <a href="#hyperparameters-tuning">Hyperparameters tuning</a> <br> &nbsp; 4.6 <a href="#fit-resamples">Fit Resamples</a> <br> &nbsp; 4.7 <a href="#evaluate-model">Evaluate Model</a> <br> &nbsp; 4.8 <a href="#last-fit">Last Fit</a> <br>
</li>
<li>
<a href="#results">Results</a> <br>
</li>
</ol>
<hr></section><section id="introduction" class="level1"><h1>Introduction</h1>
<p>On this article, I will make a ML model, in order to predict the costumers of a bank that are interested on having a term deposit. To achieve this goal I will use some Boosting algorithms (XGBoost and LightGBM). The data is from UCI website <span class="citation" data-cites="Dua2019">(<a href="#ref-Dua2019" role="doc-biblioref">Dua &amp; Graff, 2017</a>)</span> and the dataset that I worked with is “Bank Marketing” <span class="citation" data-cites="moro2014data">(<a href="#ref-moro2014data" role="doc-biblioref">Moro, Cortez, &amp; Rita, 2014</a>)</span>.</p>
<p>But first let’s explain some things.</p>
<blockquote class="blockquote">
<p>What is a term deposit ?</p>
</blockquote>
<p>Generally, we are saving our money in a bank account but we are promising to not withdraw them for a specific amount of time.</p>
<blockquote class="blockquote">
<p>And why someone to do that ?</p>
</blockquote>
<p>It is apparent that term deposits have a major disadvantage over regular ones in terms of capital availability. Of course, people will not have motive to do that without anything in return. For that reason, the banks usually offer higher interest for that kind of accounts. For example, Piraeus Bank (a bank in Greece) offers double interest rate on term deposits compared to regular ones.</p>
<p>So, we can assume that there will be a serious interest for that product mostly on people with significant amount of savings (<span class="math inline">&gt;1000</span>) and do not have large, extraordinary expenses (loan, kids, etc.).</p>
</section><section id="prerequisites" class="level1"><h1>Prerequisites</h1>
<section id="import-libraries" class="level2"><h2 class="anchored" data-anchor-id="import-libraries">Import libraries</h2>
<p>For this analysis we will need standard libraries for importing and processing my data, such as readr <span class="citation" data-cites="R-readr">(<a href="#ref-R-readr" role="doc-biblioref">Wickham, Hester, &amp; Bryan, 2022</a>)</span> and dplyr <span class="citation" data-cites="R-dplyr">(<a href="#ref-R-dplyr" role="doc-biblioref">Wickham, François, Henry, &amp; Müller, 2022</a>)</span>. The kableExtra <span class="citation" data-cites="R-kableExtra">(<a href="#ref-R-kableExtra" role="doc-biblioref">Zhu, 2021</a>)</span> package was used to print the results in table format. Concerning general purpose R libraries, I also used gridExtra in order to show ggplot items side to side.</p>
<p>On its basis this analysis is about to predict if someone is interested or not to have a term deposit. Thus, we need to build a ML model. The all-in-one solution package tidymodels is crucial to this. Although, there are some concerns about our data (imbalanced predicted value and our implementation of LightGBM. Thankfully, these are solved by bonsai and treesnip packages, respectively.</p>
<p>Finally, the ggplot2 <span class="citation" data-cites="R-ggplot2">(<a href="#ref-R-ggplot2" role="doc-biblioref">Wickham, Chang, et al., 2022</a>)</span> package was used to create some visualizations, as well as an auxiliary package, ggtext <span class="citation" data-cites="R-ggtext">(<a href="#ref-R-ggtext" role="doc-biblioref">Wilke &amp; Wiernik, 2022</a>)</span>, for further formatting those.</p>
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># General purpose R libraries</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://readr.tidyverse.org">readr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://forcats.tidyverse.org/">forcats</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://haozhu233.github.io/kableExtra/">kableExtra</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">gridExtra</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Build ML models</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidymodels.tidymodels.org">tidymodels</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Graphs</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://wilkelab.org/ggtext/">ggtext</a></span><span class="op">)</span> <span class="co"># Add support for HTML/CSS on ggplot</span></span>
<span></span>
<span><span class="co"># Other R packages</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/rstudio/fontawesome">fontawesome</a></span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># Build ML models</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidymodels.tidymodels.org">tidymodels</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://bonsai.tidymodels.org/">bonsai</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/tidymodels/themis">themis</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Other settings</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html">options</a></span><span class="op">(</span>digits<span class="op">=</span><span class="fl">4</span><span class="op">)</span> <span class="co"># print only 4 decimals</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html">options</a></span><span class="op">(</span>warn <span class="op">=</span> <span class="op">-</span><span class="fl">1</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="import-dataset" class="level2"><h2 class="anchored" data-anchor-id="import-dataset">Import dataset</h2>
<p>After loading R libraries, then I will load my data. The initial source of my dataset has various versions of the same dataset. I will use the smaller one, as the fitting process on Boosting algorithms it is more time consuming in comparison with other methods (e.g.&nbsp;Logistic Regression, k-Nearest Neighbors etc.).</p>
<div class="cell" data-hash="2022-11-24-Predict-Possible-Clients_cache/html/Import dataset_ce41a0d5664b241261796d322d77084f">
<details><summary>Show the code</summary><div class="sourceCode" id="cb2"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">bank_dataset</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_delim</a></span><span class="op">(</span><span class="st">"bank_dataset_files/bank.csv"</span>,  delim <span class="op">=</span> <span class="st">";"</span>, escape_double <span class="op">=</span> <span class="cn">FALSE</span>, trim_ws <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="preview-dataset" class="level2"><h2 class="anchored" data-anchor-id="preview-dataset">Preview dataset</h2>
<p>Here we can see a small chunk of my dataset (first 10 rows / observations) just to understand the dataset’s structure and type of variables.</p>
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb3"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">#| label: tbl-preview-dataset</span></span>
<span><span class="co">#| tbl-cap: "Preview Dataset (first 6 rows)"</span></span>
<span><span class="co">#| </span></span>
<span><span class="va">preview_bank_dataset</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">bank_dataset</span>, <span class="fl">10</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kbl.html">kbl</a></span><span class="op">(</span><span class="va">preview_bank_dataset</span>, </span>
<span>    align <span class="op">=</span> <span class="st">'c'</span>,</span>
<span>    booktabs <span class="op">=</span> <span class="cn">T</span>,</span>
<span>    centering <span class="op">=</span> <span class="cn">T</span>,</span>
<span>    valign <span class="op">=</span> <span class="cn">T</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kable_classic.html">kable_paper</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/scroll_box.html">scroll_box</a></span><span class="op">(</span>width <span class="op">=</span> <span class="st">"600px"</span>, height <span class="op">=</span> <span class="st">"250px"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">

<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:250px; overflow-x: scroll; width:600px; "><table class=" lightable-paper" style="font-family: &quot;Arial Narrow&quot;, arial, helvetica, sans-serif; margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:center;position: sticky; top:0; background-color: #FFFFFF;"> age </th>
   <th style="text-align:center;position: sticky; top:0; background-color: #FFFFFF;"> job </th>
   <th style="text-align:center;position: sticky; top:0; background-color: #FFFFFF;"> marital </th>
   <th style="text-align:center;position: sticky; top:0; background-color: #FFFFFF;"> education </th>
   <th style="text-align:center;position: sticky; top:0; background-color: #FFFFFF;"> default </th>
   <th style="text-align:center;position: sticky; top:0; background-color: #FFFFFF;"> balance </th>
   <th style="text-align:center;position: sticky; top:0; background-color: #FFFFFF;"> housing </th>
   <th style="text-align:center;position: sticky; top:0; background-color: #FFFFFF;"> loan </th>
   <th style="text-align:center;position: sticky; top:0; background-color: #FFFFFF;"> contact </th>
   <th style="text-align:center;position: sticky; top:0; background-color: #FFFFFF;"> day </th>
   <th style="text-align:center;position: sticky; top:0; background-color: #FFFFFF;"> month </th>
   <th style="text-align:center;position: sticky; top:0; background-color: #FFFFFF;"> duration </th>
   <th style="text-align:center;position: sticky; top:0; background-color: #FFFFFF;"> campaign </th>
   <th style="text-align:center;position: sticky; top:0; background-color: #FFFFFF;"> pdays </th>
   <th style="text-align:center;position: sticky; top:0; background-color: #FFFFFF;"> previous </th>
   <th style="text-align:center;position: sticky; top:0; background-color: #FFFFFF;"> poutcome </th>
   <th style="text-align:center;position: sticky; top:0; background-color: #FFFFFF;"> y </th>
  </tr></thead>
<tbody>
<tr>
<td style="text-align:center;"> 30 </td>
   <td style="text-align:center;"> unemployed </td>
   <td style="text-align:center;"> married </td>
   <td style="text-align:center;"> primary </td>
   <td style="text-align:center;"> no </td>
   <td style="text-align:center;"> 1787 </td>
   <td style="text-align:center;"> no </td>
   <td style="text-align:center;"> no </td>
   <td style="text-align:center;"> cellular </td>
   <td style="text-align:center;"> 19 </td>
   <td style="text-align:center;"> oct </td>
   <td style="text-align:center;"> 79 </td>
   <td style="text-align:center;"> 1 </td>
   <td style="text-align:center;"> -1 </td>
   <td style="text-align:center;"> 0 </td>
   <td style="text-align:center;"> unknown </td>
   <td style="text-align:center;"> no </td>
  </tr>
<tr>
<td style="text-align:center;"> 33 </td>
   <td style="text-align:center;"> services </td>
   <td style="text-align:center;"> married </td>
   <td style="text-align:center;"> secondary </td>
   <td style="text-align:center;"> no </td>
   <td style="text-align:center;"> 4789 </td>
   <td style="text-align:center;"> yes </td>
   <td style="text-align:center;"> yes </td>
   <td style="text-align:center;"> cellular </td>
   <td style="text-align:center;"> 11 </td>
   <td style="text-align:center;"> may </td>
   <td style="text-align:center;"> 220 </td>
   <td style="text-align:center;"> 1 </td>
   <td style="text-align:center;"> 339 </td>
   <td style="text-align:center;"> 4 </td>
   <td style="text-align:center;"> failure </td>
   <td style="text-align:center;"> no </td>
  </tr>
<tr>
<td style="text-align:center;"> 35 </td>
   <td style="text-align:center;"> management </td>
   <td style="text-align:center;"> single </td>
   <td style="text-align:center;"> tertiary </td>
   <td style="text-align:center;"> no </td>
   <td style="text-align:center;"> 1350 </td>
   <td style="text-align:center;"> yes </td>
   <td style="text-align:center;"> no </td>
   <td style="text-align:center;"> cellular </td>
   <td style="text-align:center;"> 16 </td>
   <td style="text-align:center;"> apr </td>
   <td style="text-align:center;"> 185 </td>
   <td style="text-align:center;"> 1 </td>
   <td style="text-align:center;"> 330 </td>
   <td style="text-align:center;"> 1 </td>
   <td style="text-align:center;"> failure </td>
   <td style="text-align:center;"> no </td>
  </tr>
<tr>
<td style="text-align:center;"> 30 </td>
   <td style="text-align:center;"> management </td>
   <td style="text-align:center;"> married </td>
   <td style="text-align:center;"> tertiary </td>
   <td style="text-align:center;"> no </td>
   <td style="text-align:center;"> 1476 </td>
   <td style="text-align:center;"> yes </td>
   <td style="text-align:center;"> yes </td>
   <td style="text-align:center;"> unknown </td>
   <td style="text-align:center;"> 3 </td>
   <td style="text-align:center;"> jun </td>
   <td style="text-align:center;"> 199 </td>
   <td style="text-align:center;"> 4 </td>
   <td style="text-align:center;"> -1 </td>
   <td style="text-align:center;"> 0 </td>
   <td style="text-align:center;"> unknown </td>
   <td style="text-align:center;"> no </td>
  </tr>
<tr>
<td style="text-align:center;"> 59 </td>
   <td style="text-align:center;"> blue-collar </td>
   <td style="text-align:center;"> married </td>
   <td style="text-align:center;"> secondary </td>
   <td style="text-align:center;"> no </td>
   <td style="text-align:center;"> 0 </td>
   <td style="text-align:center;"> yes </td>
   <td style="text-align:center;"> no </td>
   <td style="text-align:center;"> unknown </td>
   <td style="text-align:center;"> 5 </td>
   <td style="text-align:center;"> may </td>
   <td style="text-align:center;"> 226 </td>
   <td style="text-align:center;"> 1 </td>
   <td style="text-align:center;"> -1 </td>
   <td style="text-align:center;"> 0 </td>
   <td style="text-align:center;"> unknown </td>
   <td style="text-align:center;"> no </td>
  </tr>
<tr>
<td style="text-align:center;"> 35 </td>
   <td style="text-align:center;"> management </td>
   <td style="text-align:center;"> single </td>
   <td style="text-align:center;"> tertiary </td>
   <td style="text-align:center;"> no </td>
   <td style="text-align:center;"> 747 </td>
   <td style="text-align:center;"> no </td>
   <td style="text-align:center;"> no </td>
   <td style="text-align:center;"> cellular </td>
   <td style="text-align:center;"> 23 </td>
   <td style="text-align:center;"> feb </td>
   <td style="text-align:center;"> 141 </td>
   <td style="text-align:center;"> 2 </td>
   <td style="text-align:center;"> 176 </td>
   <td style="text-align:center;"> 3 </td>
   <td style="text-align:center;"> failure </td>
   <td style="text-align:center;"> no </td>
  </tr>
<tr>
<td style="text-align:center;"> 36 </td>
   <td style="text-align:center;"> self-employed </td>
   <td style="text-align:center;"> married </td>
   <td style="text-align:center;"> tertiary </td>
   <td style="text-align:center;"> no </td>
   <td style="text-align:center;"> 307 </td>
   <td style="text-align:center;"> yes </td>
   <td style="text-align:center;"> no </td>
   <td style="text-align:center;"> cellular </td>
   <td style="text-align:center;"> 14 </td>
   <td style="text-align:center;"> may </td>
   <td style="text-align:center;"> 341 </td>
   <td style="text-align:center;"> 1 </td>
   <td style="text-align:center;"> 330 </td>
   <td style="text-align:center;"> 2 </td>
   <td style="text-align:center;"> other </td>
   <td style="text-align:center;"> no </td>
  </tr>
<tr>
<td style="text-align:center;"> 39 </td>
   <td style="text-align:center;"> technician </td>
   <td style="text-align:center;"> married </td>
   <td style="text-align:center;"> secondary </td>
   <td style="text-align:center;"> no </td>
   <td style="text-align:center;"> 147 </td>
   <td style="text-align:center;"> yes </td>
   <td style="text-align:center;"> no </td>
   <td style="text-align:center;"> cellular </td>
   <td style="text-align:center;"> 6 </td>
   <td style="text-align:center;"> may </td>
   <td style="text-align:center;"> 151 </td>
   <td style="text-align:center;"> 2 </td>
   <td style="text-align:center;"> -1 </td>
   <td style="text-align:center;"> 0 </td>
   <td style="text-align:center;"> unknown </td>
   <td style="text-align:center;"> no </td>
  </tr>
<tr>
<td style="text-align:center;"> 41 </td>
   <td style="text-align:center;"> entrepreneur </td>
   <td style="text-align:center;"> married </td>
   <td style="text-align:center;"> tertiary </td>
   <td style="text-align:center;"> no </td>
   <td style="text-align:center;"> 221 </td>
   <td style="text-align:center;"> yes </td>
   <td style="text-align:center;"> no </td>
   <td style="text-align:center;"> unknown </td>
   <td style="text-align:center;"> 14 </td>
   <td style="text-align:center;"> may </td>
   <td style="text-align:center;"> 57 </td>
   <td style="text-align:center;"> 2 </td>
   <td style="text-align:center;"> -1 </td>
   <td style="text-align:center;"> 0 </td>
   <td style="text-align:center;"> unknown </td>
   <td style="text-align:center;"> no </td>
  </tr>
<tr>
<td style="text-align:center;"> 43 </td>
   <td style="text-align:center;"> services </td>
   <td style="text-align:center;"> married </td>
   <td style="text-align:center;"> primary </td>
   <td style="text-align:center;"> no </td>
   <td style="text-align:center;"> -88 </td>
   <td style="text-align:center;"> yes </td>
   <td style="text-align:center;"> yes </td>
   <td style="text-align:center;"> cellular </td>
   <td style="text-align:center;"> 17 </td>
   <td style="text-align:center;"> apr </td>
   <td style="text-align:center;"> 313 </td>
   <td style="text-align:center;"> 1 </td>
   <td style="text-align:center;"> 147 </td>
   <td style="text-align:center;"> 2 </td>
   <td style="text-align:center;"> failure </td>
   <td style="text-align:center;"> no </td>
  </tr>
</tbody>
</table></div>

</div>
</div>
</section><section id="dataset-structure" class="level2"><h2 class="anchored" data-anchor-id="dataset-structure">Dataset structure</h2>
<p>Before we do any analysis we have to define what kind of data we have available. We can assess this type of information by looking on the values of each variable. Generally, we can classify our variables, depending their values, as follows :</p>
<center>
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>graph TD;</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  A(Type of variables) --&gt; B(Quantitative)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  A(Type of variables) --&gt; C(Qualitative)</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  B --&gt; D(Discrete)</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  B --&gt; E(Continuous)</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  C --&gt; J(Nominal)</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  C --&gt; G(Ordinal)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<p>
</p>
<pre class="mermaid mermaid-js" data-tooltip-selector="#mermaid-tooltip-1">graph TD;
  A(Type of variables) --&gt; B(Quantitative)
  A(Type of variables) --&gt; C(Qualitative)
  B --&gt; D(Discrete)
  B --&gt; E(Continuous)
  C --&gt; J(Nominal)
  C --&gt; G(Ordinal)
</pre>
<div id="mermaid-tooltip-1" class="mermaidTooltip">

</div>

</div>
</div>
</div>
</center>
<p>Our dataset is consisted by 17 variables (columns) and 4521 observations (rows). More specifically, concerning my variables, are as follows :</p>
<table class="table">
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<thead><tr class="header">
<th style="text-align: center;">Variable</th>
<th style="text-align: center;">Property</th>
<th style="text-align: center;">Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><code>Age</code></td>
<td style="text-align: center;">
<em>quantitative</em> <br> (continuous)</td>
<td style="text-align: center;">The age of the respondent</td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>Job</code></td>
<td style="text-align: center;">
<em>qualitative</em> <br> (nominal)</td>
<td style="text-align: center;">The sector of employment of the respondent</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code>Marital</code></td>
<td style="text-align: center;">
<em>qualitative</em> <br> (nominal)</td>
<td style="text-align: center;">The marital status of the respondent</td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>Education</code></td>
<td style="text-align: center;">
<em>qualitative</em> <br> (ordinal)</td>
<td style="text-align: center;">The higher education level that the respondent has ever reached</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code>Default</code></td>
<td style="text-align: center;">
<em>qualitative</em> <br> (nominal)</td>
<td style="text-align: center;">has credit in default?</td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>Balance</code></td>
<td style="text-align: center;">
<em>quantitative</em> <br> (continuous)</td>
<td style="text-align: center;">Average yearly balance, in euros</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code>Housing</code></td>
<td style="text-align: center;">
<em>qualitative</em> <br> (nominal)</td>
<td style="text-align: center;">Has housing loan?</td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>Loan</code></td>
<td style="text-align: center;">
<em>qualitative</em> <br> (nominal)</td>
<td style="text-align: center;">Has personal loan?</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code>Contact</code></td>
<td style="text-align: center;">
<em>qualitative</em> <br> (nominal)</td>
<td style="text-align: center;">Contact communication type</td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>Month</code></td>
<td style="text-align: center;">
<em>qualitative</em> <br> (ordinal)</td>
<td style="text-align: center;">Last contact day of the month</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code>Duration</code></td>
<td style="text-align: center;">
<em>quantitative</em> <br> (continuous)</td>
<td style="text-align: center;">Last contact duration, in seconds (numeric)</td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>Campaign</code></td>
<td style="text-align: center;"><em>quantitative</em></td>
<td style="text-align: center;">Number of contacts performed during this campaign and for this client</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code>pdays</code></td>
<td style="text-align: center;"><em>quantitative</em></td>
<td style="text-align: center;">Number of days that passed by after the client was last contacted from a previous campaign</td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>pprevious</code></td>
<td style="text-align: center;"><em>quantitative</em></td>
<td style="text-align: center;">Number of contacts performed before this campaign and for this client</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code>poutcome</code></td>
<td style="text-align: center;">
<em>qualitative</em> (nominal)</td>
<td style="text-align: center;">Outcome of the previous marketing campaign</td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>Deposit</code></td>
<td style="text-align: center;">
<em>qualitative</em> <br> (nominal)</td>
<td style="text-align: center;">Has the client subscribed a term deposit?</td>
</tr>
</tbody>
</table>
<p>Thus, my sample has 17 variables, of which 7 are quantitative and 10 are quantitative properties, of which 8 are nominal and the rest ones (<code>Education</code>, <code>Month</code>) are ordinal.</p>
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb5"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">bank_dataset</span><span class="op">$</span><span class="va">y</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span><span class="op">(</span><span class="va">bank_dataset</span><span class="op">$</span><span class="va">y</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="custom-functions" class="level2"><h2 class="anchored" data-anchor-id="custom-functions">Custom functions</h2>
<blockquote class="blockquote">
<p>So, I have a basic idea about my data. Can we start analyzing our data?</p>
</blockquote>
<p>It depends. If you want to do a simple analysis then yes. Although most of the times this is not the case. Probably there is the need for repetitive actions. In order to not repeat ourselves we need to define some actions, prior to our analysis.</p>
<p>On this occasion, I found beneficial the definition of a function for qualitative data.</p>
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb6"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">univariate_qualitative</span> <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">variable</span>, <span class="va">title_plot</span><span class="op">)</span><span class="op">{</span></span>
<span><span class="va">table</span> <span class="op">=</span> <span class="va">bank_dataset</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">variable</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/proportions.html">prop.table</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu">magrittr</span><span class="fu">::</span><span class="fu"><a href="https://magrittr.tidyverse.org/reference/aliases.html">set_colnames</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Var1"</span>, <span class="st">"Freq"</span><span class="op">)</span><span class="op">)</span></span>
<span>  </span>
<span><span class="va">plot</span> <span class="op">=</span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">table</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_reorder.html">fct_reorder</a></span><span class="op">(</span><span class="va">Var1</span>,<span class="va">Freq</span>, .desc <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>, fill<span class="op">=</span><span class="va">Var1</span>, y <span class="op">=</span> <span class="va">Freq</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>     <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"identity"</span><span class="op">)</span><span class="op">+</span></span>
<span>     <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_hue.html">scale_fill_hue</a></span><span class="op">(</span>c <span class="op">=</span> <span class="fl">40</span><span class="op">)</span> <span class="op">+</span></span>
<span>     <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html">geom_text</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html">sprintf</a></span><span class="op">(</span><span class="st">"%.2f %%"</span>, <span class="va">Freq</span><span class="op">*</span><span class="fl">100</span><span class="op">)</span>,  stat<span class="op">=</span><span class="st">"identity"</span>,</span>
<span>        vjust <span class="op">=</span> <span class="op">-</span><span class="fl">.1</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>     <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span></span>
<span>       title <span class="op">=</span> <span class="va">title_plot</span>,</span>
<span>       caption <span class="op">=</span> <span class="st">"Bank Marketing Dataset from &lt;b&gt;UCI&lt;/b&gt;"</span>,</span>
<span>       x <span class="op">=</span> <span class="st">"Response"</span>,</span>
<span>       y <span class="op">=</span> <span class="st">"Observations"</span></span>
<span>        <span class="op">)</span> <span class="op">+</span></span>
<span>     <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_classic</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>     <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"none"</span>,</span>
<span>        axis.text.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>angle <span class="op">=</span> <span class="fl">30</span>, vjust <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span>,</span>
<span>        plot.caption <span class="op">=</span> <span class="fu"><a href="https://wilkelab.org/ggtext/reference/element_markdown.html">element_markdown</a></span><span class="op">(</span>lineheight <span class="op">=</span> <span class="fl">1.2</span><span class="op">)</span>,</span>
<span>        plot.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>hjust <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span>,<span class="op">)</span></span>
<span>  </span>
<span><span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="va">plot</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>I will do the same for univariate numeric data.</p>
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb7"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">univ_quanti</span> <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">variable_sel</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">bank_dataset</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">variable_sel</span> <span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">variable_sel</span>, stat <span class="op">=</span> <span class="st">"count"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_hue.html">scale_fill_hue</a></span><span class="op">(</span>c <span class="op">=</span> <span class="fl">40</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"Age Distribution of Respondents"</span>,</span>
<span>    caption <span class="op">=</span> <span class="st">"Bank Marketing Dataset from &lt;b&gt;UCI&lt;/b&gt;"</span>,</span>
<span>    x <span class="op">=</span> <span class="st">"Age of Respondent"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Observations"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_classic</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span></span>
<span>    plot.caption <span class="op">=</span> <span class="fu"><a href="https://wilkelab.org/ggtext/reference/element_markdown.html">element_markdown</a></span><span class="op">(</span>lineheight <span class="op">=</span> <span class="fl">1.2</span><span class="op">)</span>,</span>
<span>    plot.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>hjust <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section></section><section id="eda-with-r" class="level1"><h1>EDA with R</h1>
<section id="missing-values" class="level2"><h2 class="anchored" data-anchor-id="missing-values">Missing Values</h2>
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb8"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">how_many_nas</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">bank_dataset</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>On this dataset there are 0 missing values, in total. So, there is no need for imputation.</p>
</section><section id="univariate-analysis" class="level2"><h2 class="anchored" data-anchor-id="univariate-analysis">Univariate analysis</h2>
<section id="qualitative-variables" class="level3"><h3 class="anchored" data-anchor-id="qualitative-variables">Qualitative variables</h3>
<div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true">Job</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">Marital status</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" role="tab" aria-controls="tabset-1-3" aria-selected="false">Education</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-4" role="tab" aria-controls="tabset-1-4" aria-selected="false">Default</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-5-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-5" role="tab" aria-controls="tabset-1-5" aria-selected="false">Housing</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-6-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-6" role="tab" aria-controls="tabset-1-6" aria-selected="false">Loan</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-7-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-7" role="tab" aria-controls="tabset-1-7" aria-selected="false">Contact</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-8-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-8" role="tab" aria-controls="tabset-1-8" aria-selected="false">Month</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-9-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-9" role="tab" aria-controls="tabset-1-9" aria-selected="false">poutcome</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-10-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-10" role="tab" aria-controls="tabset-1-10" aria-selected="false">Deposit</a></li>
</ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div class="cell" data-layout-align="center">
<details><summary>Show the code</summary><div class="sourceCode" id="cb9"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">univariate_qualitative</span><span class="op">(</span><span class="st">"job"</span>, <span class="st">"Job of Respondent"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="2022-11-24-Predict-Possible-Clients_files/figure-html/Figure - Job-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div class="cell" data-layout-align="center">
<details><summary>Show the code</summary><div class="sourceCode" id="cb10"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">univariate_qualitative</span><span class="op">(</span><span class="st">"marital"</span>, <span class="st">"Marital Status of the respondent"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="2022-11-24-Predict-Possible-Clients_files/figure-html/Figure - Marital Status-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-1-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-3-tab">
<div class="cell" data-layout-align="center">
<details><summary>Show the code</summary><div class="sourceCode" id="cb11"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">univariate_qualitative</span><span class="op">(</span><span class="st">"education"</span>, <span class="st">"Educational Backgroung"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="2022-11-24-Predict-Possible-Clients_files/figure-html/Figure - Education-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-1-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-4-tab">
<div class="cell" data-layout-align="center">
<details><summary>Show the code</summary><div class="sourceCode" id="cb12"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">univariate_qualitative</span><span class="op">(</span><span class="st">"default"</span>, <span class="st">"Has credit in default ?"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="2022-11-24-Predict-Possible-Clients_files/figure-html/Figure - Default-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-1-5" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-5-tab">
<div class="cell" data-layout-align="center">
<details><summary>Show the code</summary><div class="sourceCode" id="cb13"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">univariate_qualitative</span><span class="op">(</span><span class="st">"housing"</span>, <span class="st">"Has housing loan?"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="2022-11-24-Predict-Possible-Clients_files/figure-html/Figure - Housing-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-1-6" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-6-tab">
<div class="cell" data-layout-align="center">
<details><summary>Show the code</summary><div class="sourceCode" id="cb14"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">univariate_qualitative</span><span class="op">(</span><span class="st">"loan"</span>, <span class="st">"Has personal loan ?"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="2022-11-24-Predict-Possible-Clients_files/figure-html/Figure - Loan-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-1-7" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-7-tab">
<div class="cell" data-layout-align="center">
<details><summary>Show the code</summary><div class="sourceCode" id="cb15"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">univariate_qualitative</span><span class="op">(</span><span class="st">"contact"</span>, <span class="st">"Type of Contact"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="2022-11-24-Predict-Possible-Clients_files/figure-html/Figure - Contact -1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-1-8" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-8-tab">
<div class="cell" data-layout-align="center">
<details><summary>Show the code</summary><div class="sourceCode" id="cb16"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html">options</a></span><span class="op">(</span>digits <span class="op">=</span><span class="fl">2</span><span class="op">)</span></span>
<span></span>
<span><span class="va">perc_month</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">bank_dataset</span><span class="op">$</span><span class="va">month</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/proportions.html">prop.table</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/sort.html">sort</a></span><span class="op">(</span>decreasing <span class="op">=</span> <span class="cn">T</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">num_month</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">bank_dataset</span><span class="op">$</span><span class="va">month</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/sort.html">sort</a></span><span class="op">(</span>decreasing <span class="op">=</span> <span class="cn">T</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">perc_month</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">Var1</span>, level <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'jan'</span>, <span class="st">'feb'</span>, <span class="st">'mar'</span>, <span class="st">'apr'</span>,<span class="st">'may'</span>,<span class="st">'jun'</span>,<span class="st">'jul'</span>,<span class="st">'aug'</span>,<span class="st">'sep'</span>, <span class="st">'oct'</span>, <span class="st">'nov'</span>, <span class="st">'dec'</span><span class="op">)</span><span class="op">)</span>, y <span class="op">=</span> <span class="va">Freq</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"identity"</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_hue.html">scale_fill_hue</a></span><span class="op">(</span>c <span class="op">=</span> <span class="fl">40</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html">geom_text</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html">sprintf</a></span><span class="op">(</span><span class="st">"%.2f"</span>, <span class="va">Freq</span><span class="op">*</span><span class="fl">100</span><span class="op">)</span>,  stat<span class="op">=</span><span class="st">"identity"</span>,</span>
<span>        vjust <span class="op">=</span> <span class="op">-</span><span class="fl">.25</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"Calls per month"</span>,</span>
<span>    caption <span class="op">=</span> <span class="st">"Bank Marketing Dataset from &lt;b&gt;UCI&lt;/b&gt;"</span>,</span>
<span>    x <span class="op">=</span> <span class="st">"Response"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Observations"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_classic</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"none"</span>,</span>
<span>        axis.text.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>vjust <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span>,</span>
<span>        plot.caption <span class="op">=</span> <span class="fu"><a href="https://wilkelab.org/ggtext/reference/element_markdown.html">element_markdown</a></span><span class="op">(</span>lineheight <span class="op">=</span> <span class="fl">1.2</span><span class="op">)</span>,</span>
<span>        plot.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>hjust <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="2022-11-24-Predict-Possible-Clients_files/figure-html/Figure - Month -1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-1-9" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-9-tab">
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb17"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">univariate_qualitative</span><span class="op">(</span><span class="st">"poutcome"</span>, <span class="st">"Outcome of previous approach"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="2022-11-24-Predict-Possible-Clients_files/figure-html/Figure - poutcome-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-1-10" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-10-tab">
<div class="cell" data-layout-align="center">
<details><summary>Show the code</summary><div class="sourceCode" id="cb18"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">univariate_qualitative</span><span class="op">(</span><span class="st">"y"</span>, <span class="st">"How many people made a deposit account ?"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="2022-11-24-Predict-Possible-Clients_files/figure-html/Figure - Output Variable (Deposit Account (Y/N))-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section><section id="quantitative-variables" class="level3"><h3 class="anchored" data-anchor-id="quantitative-variables">Quantitative variables</h3>
<div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true">Age</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false">Balance</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-3" role="tab" aria-controls="tabset-2-3" aria-selected="false">Duration</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-4" role="tab" aria-controls="tabset-2-4" aria-selected="false">Campaign</a></li>
</ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<div class="cell" data-layout-align="center">
<details><summary>Show the code</summary><div class="sourceCode" id="cb19"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">bank_dataset</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">age</span> <span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_hue.html">scale_fill_hue</a></span><span class="op">(</span>c <span class="op">=</span> <span class="fl">40</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"Age Distribution of Respondents"</span>,</span>
<span>    caption <span class="op">=</span> <span class="st">"Bank Marketing Dataset from &lt;b&gt;UCI&lt;/b&gt;"</span>,</span>
<span>    x <span class="op">=</span> <span class="st">"Age of Respondent"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Observations"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_classic</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span></span>
<span>    plot.caption <span class="op">=</span> <span class="fu"><a href="https://wilkelab.org/ggtext/reference/element_markdown.html">element_markdown</a></span><span class="op">(</span>lineheight <span class="op">=</span> <span class="fl">1.2</span><span class="op">)</span>,</span>
<span>    plot.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>hjust <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="2022-11-24-Predict-Possible-Clients_files/figure-html/Figure - Age-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<details><summary>Show the code</summary><div class="sourceCode" id="cb20"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># NOTE : In order to make HTML tags to work I need to specify element on theme command.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<div class="cell" data-layout-align="center">
<details><summary>Show the code</summary><div class="sourceCode" id="cb21"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">bank_dataset</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">balance</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>bins <span class="op">=</span> <span class="fl">20</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_hue.html">scale_fill_hue</a></span><span class="op">(</span>c <span class="op">=</span> <span class="fl">40</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"Average yearly balance"</span>,</span>
<span>    caption <span class="op">=</span> <span class="st">" Bank Marketing Data Set from &lt;b&gt;UCI&lt;/b&gt;"</span>,</span>
<span>    x <span class="op">=</span> <span class="st">"Response"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Observations"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_bw</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"none"</span>,</span>
<span>        plot.caption <span class="op">=</span> <span class="fu"><a href="https://wilkelab.org/ggtext/reference/element_markdown.html">element_markdown</a></span><span class="op">(</span>lineheight <span class="op">=</span> <span class="fl">1.2</span><span class="op">)</span>,</span>
<span>        plot.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>hjust <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="2022-11-24-Predict-Possible-Clients_files/figure-html/Figure - Balance-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-2-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-3-tab">
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb22"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">bank_dataset</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">duration</span>, fill<span class="op">=</span><span class="va">duration</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span> <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_hue.html">scale_fill_hue</a></span><span class="op">(</span>c <span class="op">=</span> <span class="fl">40</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_bw</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"How many people made a deposit account ?"</span>,</span>
<span>    caption <span class="op">=</span> <span class="st">"Data from the 1974 Motor Trend US magazine."</span>,</span>
<span>    x <span class="op">=</span> <span class="st">"Response"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Observations"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_classic</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stderr">
<pre><code>`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
</div>
<div class="cell-output-display">
<p><img src="2022-11-24-Predict-Possible-Clients_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-2-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-4-tab">
<div class="cell" data-layout-align="center">
<details><summary>Show the code</summary><div class="sourceCode" id="cb24"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">bank_dataset</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span> <span class="va">campaign</span>, fill<span class="op">=</span><span class="va">campaign</span> <span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_hue.html">scale_fill_hue</a></span><span class="op">(</span>c <span class="op">=</span> <span class="fl">40</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_bw</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"Number of Approaches to a specific person"</span>,</span>
<span>    x <span class="op">=</span> <span class="st">"# of Approaches"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Observations"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_classic</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="2022-11-24-Predict-Possible-Clients_files/figure-html/Figure - Campaign - Num of Approaches to specific person-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section></section><section id="bivariate-analysis" class="level2"><h2 class="anchored" data-anchor-id="bivariate-analysis">Bivariate analysis</h2>
<p>On the previous section I learned a lot about my dataset. Now, I have to reveal relationships between my variables. Visualizing those relationships will make it even easier to explain our results. In order to make the right plots on the right occasions I used the book “Datavis with R” (<a href="https://rkabacoff.github.io/datavis/Bivariate.html">Chapter 4 : Bivariate Graphs</a>).</p>
<section id="qualitative-variables-1" class="level3"><h3 class="anchored" data-anchor-id="qualitative-variables-1">Qualitative variables</h3>
<div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-3-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-1" role="tab" aria-controls="tabset-3-1" aria-selected="true">Job</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-2" role="tab" aria-controls="tabset-3-2" aria-selected="false">Marital status</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-3" role="tab" aria-controls="tabset-3-3" aria-selected="false">Education</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-4" role="tab" aria-controls="tabset-3-4" aria-selected="false">Default</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-5-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-5" role="tab" aria-controls="tabset-3-5" aria-selected="false">Housing</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-6-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-6" role="tab" aria-controls="tabset-3-6" aria-selected="false">Loan</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-7-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-7" role="tab" aria-controls="tabset-3-7" aria-selected="false">Contact</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-8-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-8" role="tab" aria-controls="tabset-3-8" aria-selected="false">Month</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-9-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-9" role="tab" aria-controls="tabset-3-9" aria-selected="false">poutcome</a></li>
</ul>
<div class="tab-content">
<div id="tabset-3-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-3-1-tab">
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb25"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">plotjob</span> <span class="op">&lt;-</span> <span class="va">bank_dataset</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">job</span>, <span class="va">y</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>pct <span class="op">=</span> <span class="va">n</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span>,</span>
<span>         lbl <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/percent_format.html">percent</a></span><span class="op">(</span><span class="va">pct</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">plot_job</span> <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">plotjob</span>, </span>
<span>       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_reorder.html">fct_reorder</a></span><span class="op">(</span><span class="va">job</span>, <span class="va">pct</span><span class="op">)</span>,</span>
<span>           y <span class="op">=</span> <span class="va">pct</span>,</span>
<span>           fill <span class="op">=</span> <span class="va">y</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"identity"</span>,</span>
<span>           position <span class="op">=</span> <span class="st">"fill"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html">geom_text</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="va">lbl</span><span class="op">)</span>, </span>
<span>            size <span class="op">=</span> <span class="fl">3</span>, </span>
<span>            position <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/position_stack.html">position_stack</a></span><span class="op">(</span>vjust <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html">scale_fill_brewer</a></span><span class="op">(</span>palette <span class="op">=</span> <span class="st">"Set2"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>y <span class="op">=</span> <span class="st">"Percent"</span>, </span>
<span>       fill <span class="op">=</span> <span class="st">"Drive Train"</span>,</span>
<span>       x <span class="op">=</span> <span class="st">"Class"</span>,</span>
<span>       title <span class="op">=</span> <span class="st">"Job of Respondent by Interest to Term Deposit"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_classic</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"none"</span>,</span>
<span>        axis.text.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>angle <span class="op">=</span> <span class="fl">30</span>, vjust <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span>,</span>
<span>        plot.caption <span class="op">=</span> <span class="fu"><a href="https://wilkelab.org/ggtext/reference/element_markdown.html">element_markdown</a></span><span class="op">(</span>lineheight <span class="op">=</span> <span class="fl">1.2</span><span class="op">)</span>,</span>
<span>        plot.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>hjust <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">plot_job</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="2022-11-24-Predict-Possible-Clients_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-3-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-2-tab">
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb26"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">plot_marital1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">bank_dataset</span>, </span>
<span>       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">marital</span>, </span>
<span>           fill <span class="op">=</span> <span class="va">y</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_hue.html">scale_fill_hue</a></span><span class="op">(</span>c <span class="op">=</span> <span class="fl">40</span><span class="op">)</span> <span class="op">+</span></span>
<span>       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_bw</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span>position <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/position_dodge.html">position_dodge</a></span><span class="op">(</span>preserve <span class="op">=</span> <span class="st">"single"</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb27"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">plotmarital</span> <span class="op">&lt;-</span> <span class="va">bank_dataset</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">marital</span>, <span class="va">y</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>pct <span class="op">=</span> <span class="va">n</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span>,</span>
<span>         lbl <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/percent_format.html">percent</a></span><span class="op">(</span><span class="va">pct</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">plot_marital2</span> <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">plotmarital</span>, </span>
<span>       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">marital</span>,</span>
<span>           y <span class="op">=</span> <span class="va">pct</span>,</span>
<span>           fill <span class="op">=</span> <span class="va">y</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"identity"</span>,</span>
<span>           position <span class="op">=</span> <span class="st">"fill"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html">geom_text</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="va">lbl</span><span class="op">)</span>, </span>
<span>            size <span class="op">=</span> <span class="fl">3</span>, </span>
<span>            position <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/position_stack.html">position_stack</a></span><span class="op">(</span>vjust <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html">scale_fill_brewer</a></span><span class="op">(</span>palette <span class="op">=</span> <span class="st">"Set2"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>y <span class="op">=</span> <span class="st">"Percent"</span>, </span>
<span>       fill <span class="op">=</span> <span class="st">"Drive Train"</span>,</span>
<span>       x <span class="op">=</span> <span class="st">"Class"</span>,</span>
<span>       title <span class="op">=</span> <span class="st">"Marital Status by Interest to Term Deposit"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_classic</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"none"</span>,</span>
<span>        axis.text.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>angle <span class="op">=</span> <span class="fl">30</span>, vjust <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span>,</span>
<span>        plot.caption <span class="op">=</span> <span class="fu"><a href="https://wilkelab.org/ggtext/reference/element_markdown.html">element_markdown</a></span><span class="op">(</span>lineheight <span class="op">=</span> <span class="fl">1.2</span><span class="op">)</span>,</span>
<span>        plot.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>hjust <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb28"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">gridExtra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/gridExtra/man/arrangeGrob.html">grid.arrange</a></span><span class="op">(</span><span class="va">plot_marital1</span>, <span class="va">plot_marital2</span>, nrow <span class="op">=</span><span class="fl">1</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="2022-11-24-Predict-Possible-Clients_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-3-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-3-tab">
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb29"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">plot_education1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">bank_dataset</span>, </span>
<span>       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">education</span>, </span>
<span>           fill <span class="op">=</span> <span class="va">y</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_hue.html">scale_fill_hue</a></span><span class="op">(</span>c <span class="op">=</span> <span class="fl">40</span><span class="op">)</span> <span class="op">+</span></span>
<span>       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_bw</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span>position <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/position_dodge.html">position_dodge</a></span><span class="op">(</span>preserve <span class="op">=</span> <span class="st">"single"</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb30"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">plot_education2</span> <span class="op">=</span> <span class="va">bank_dataset</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">education</span>, <span class="va">y</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>pct <span class="op">=</span> <span class="va">n</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span>,</span>
<span>         lbl <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/percent_format.html">percent</a></span><span class="op">(</span><span class="va">pct</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">education</span>,</span>
<span>           y <span class="op">=</span> <span class="va">pct</span>,</span>
<span>           fill <span class="op">=</span> <span class="va">y</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"identity"</span>,</span>
<span>           position <span class="op">=</span> <span class="st">"fill"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html">geom_text</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="va">lbl</span><span class="op">)</span>, </span>
<span>            size <span class="op">=</span> <span class="fl">3</span>, </span>
<span>            position <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/position_stack.html">position_stack</a></span><span class="op">(</span>vjust <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html">scale_fill_brewer</a></span><span class="op">(</span>palette <span class="op">=</span> <span class="st">"Set2"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>y <span class="op">=</span> <span class="st">"Percent"</span>, </span>
<span>       fill <span class="op">=</span> <span class="st">"Drive Train"</span>,</span>
<span>       x <span class="op">=</span> <span class="st">"Class"</span>,</span>
<span>       title <span class="op">=</span> <span class="st">"Educational Background by Interest to Term Deposit"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_classic</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"none"</span>,</span>
<span>        axis.text.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>angle <span class="op">=</span> <span class="fl">30</span>, vjust <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span>,</span>
<span>        plot.caption <span class="op">=</span> <span class="fu"><a href="https://wilkelab.org/ggtext/reference/element_markdown.html">element_markdown</a></span><span class="op">(</span>lineheight <span class="op">=</span> <span class="fl">1.2</span><span class="op">)</span>,</span>
<span>        plot.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>hjust <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb31"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">gridExtra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/gridExtra/man/arrangeGrob.html">grid.arrange</a></span><span class="op">(</span><span class="va">plot_education1</span>, <span class="va">plot_education2</span>, nrow <span class="op">=</span><span class="fl">1</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="2022-11-24-Predict-Possible-Clients_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-3-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-4-tab">
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb32"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">plot_default1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">bank_dataset</span>, </span>
<span>       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">default</span>, </span>
<span>           fill <span class="op">=</span> <span class="va">y</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>        <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_hue.html">scale_fill_hue</a></span><span class="op">(</span>c <span class="op">=</span> <span class="fl">40</span><span class="op">)</span> <span class="op">+</span></span>
<span>        <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_bw</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span>position <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/position_dodge.html">position_dodge</a></span><span class="op">(</span>preserve <span class="op">=</span> <span class="st">"single"</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb33"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">plot_default2</span> <span class="op">=</span> <span class="va">bank_dataset</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">default</span>, <span class="va">y</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>pct <span class="op">=</span> <span class="va">n</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span>,</span>
<span>         lbl <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/percent_format.html">percent</a></span><span class="op">(</span><span class="va">pct</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">default</span>,</span>
<span>           y <span class="op">=</span> <span class="va">pct</span>,</span>
<span>           fill <span class="op">=</span> <span class="va">y</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"identity"</span>,</span>
<span>           position <span class="op">=</span> <span class="st">"fill"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html">geom_text</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="va">lbl</span><span class="op">)</span>, </span>
<span>            size <span class="op">=</span> <span class="fl">3</span>, </span>
<span>            position <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/position_stack.html">position_stack</a></span><span class="op">(</span>vjust <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html">scale_fill_brewer</a></span><span class="op">(</span>palette <span class="op">=</span> <span class="st">"Set2"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>y <span class="op">=</span> <span class="st">"Percent"</span>, </span>
<span>       fill <span class="op">=</span> <span class="st">"Drive Train"</span>,</span>
<span>       x <span class="op">=</span> <span class="st">"Class"</span>,</span>
<span>       title <span class="op">=</span> <span class="st">"Has credit in default ?"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_classic</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"none"</span>,</span>
<span>        axis.text.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>angle <span class="op">=</span> <span class="fl">30</span>, vjust <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span>,</span>
<span>        plot.caption <span class="op">=</span> <span class="fu"><a href="https://wilkelab.org/ggtext/reference/element_markdown.html">element_markdown</a></span><span class="op">(</span>lineheight <span class="op">=</span> <span class="fl">1.2</span><span class="op">)</span>,</span>
<span>        plot.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>hjust <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'default'. You can override using the
`.groups` argument.</code></pre>
</div>
</div>
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb35"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">gridExtra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/gridExtra/man/arrangeGrob.html">grid.arrange</a></span><span class="op">(</span><span class="va">plot_default1</span>, <span class="va">plot_default2</span>, nrow <span class="op">=</span><span class="fl">1</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="2022-11-24-Predict-Possible-Clients_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-3-5" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-5-tab">
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb36"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">plot_housing1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">bank_dataset</span>, </span>
<span>       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">housing</span>, </span>
<span>           fill <span class="op">=</span> <span class="va">y</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_hue.html">scale_fill_hue</a></span><span class="op">(</span>c <span class="op">=</span> <span class="fl">40</span><span class="op">)</span> <span class="op">+</span></span>
<span>       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_bw</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span>position <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/position_dodge.html">position_dodge</a></span><span class="op">(</span>preserve <span class="op">=</span> <span class="st">"single"</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb37"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">plot_housing2</span> <span class="op">=</span> <span class="va">bank_dataset</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">housing</span>, <span class="va">y</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>pct <span class="op">=</span> <span class="va">n</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span>,</span>
<span>         lbl <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/percent_format.html">percent</a></span><span class="op">(</span><span class="va">pct</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">housing</span>,</span>
<span>           y <span class="op">=</span> <span class="va">pct</span>,</span>
<span>           fill <span class="op">=</span> <span class="va">y</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"identity"</span>,</span>
<span>           position <span class="op">=</span> <span class="st">"fill"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html">geom_text</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="va">lbl</span><span class="op">)</span>, </span>
<span>            size <span class="op">=</span> <span class="fl">3</span>, </span>
<span>            position <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/position_stack.html">position_stack</a></span><span class="op">(</span>vjust <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html">scale_fill_brewer</a></span><span class="op">(</span>palette <span class="op">=</span> <span class="st">"Set2"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>y <span class="op">=</span> <span class="st">"Percent"</span>, </span>
<span>       fill <span class="op">=</span> <span class="st">"Drive Train"</span>,</span>
<span>       x <span class="op">=</span> <span class="st">"Class"</span>,</span>
<span>       title <span class="op">=</span> <span class="st">"Has housing loan ?"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_classic</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"none"</span>,</span>
<span>        axis.text.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>angle <span class="op">=</span> <span class="fl">30</span>, vjust <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span>,</span>
<span>        plot.caption <span class="op">=</span> <span class="fu"><a href="https://wilkelab.org/ggtext/reference/element_markdown.html">element_markdown</a></span><span class="op">(</span>lineheight <span class="op">=</span> <span class="fl">1.2</span><span class="op">)</span>,</span>
<span>        plot.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>hjust <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'housing'. You can override using the
`.groups` argument.</code></pre>
</div>
</div>
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb39"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">gridExtra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/gridExtra/man/arrangeGrob.html">grid.arrange</a></span><span class="op">(</span><span class="va">plot_housing1</span>, <span class="va">plot_housing2</span>, nrow <span class="op">=</span><span class="fl">1</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="2022-11-24-Predict-Possible-Clients_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-3-6" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-6-tab">
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb40"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">plot_loan1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">bank_dataset</span>, </span>
<span>       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">loan</span>, </span>
<span>           fill <span class="op">=</span> <span class="va">y</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>      <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_hue.html">scale_fill_hue</a></span><span class="op">(</span>c <span class="op">=</span> <span class="fl">40</span><span class="op">)</span> <span class="op">+</span></span>
<span>      <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_bw</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>      <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span>position <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/position_dodge.html">position_dodge</a></span><span class="op">(</span>preserve <span class="op">=</span> <span class="st">"single"</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb41"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">plot_loan2</span> <span class="op">=</span> <span class="va">bank_dataset</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">loan</span>, <span class="va">y</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>pct <span class="op">=</span> <span class="va">n</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span>,</span>
<span>         lbl <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/percent_format.html">percent</a></span><span class="op">(</span><span class="va">pct</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">loan</span>,</span>
<span>           y <span class="op">=</span> <span class="va">pct</span>,</span>
<span>           fill <span class="op">=</span> <span class="va">y</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"identity"</span>,</span>
<span>           position <span class="op">=</span> <span class="st">"fill"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html">geom_text</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="va">lbl</span><span class="op">)</span>, </span>
<span>            size <span class="op">=</span> <span class="fl">3</span>, </span>
<span>            position <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/position_stack.html">position_stack</a></span><span class="op">(</span>vjust <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html">scale_fill_brewer</a></span><span class="op">(</span>palette <span class="op">=</span> <span class="st">"Set2"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>y <span class="op">=</span> <span class="st">"Percent"</span>, </span>
<span>       fill <span class="op">=</span> <span class="st">"Interested"</span>,</span>
<span>       x <span class="op">=</span> <span class="st">"Class"</span>,</span>
<span>       title <span class="op">=</span> <span class="st">"Has personal loan ?"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_classic</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"none"</span>,</span>
<span>        axis.text.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>angle <span class="op">=</span> <span class="fl">30</span>, vjust <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span>,</span>
<span>        plot.caption <span class="op">=</span> <span class="fu"><a href="https://wilkelab.org/ggtext/reference/element_markdown.html">element_markdown</a></span><span class="op">(</span>lineheight <span class="op">=</span> <span class="fl">1.2</span><span class="op">)</span>,</span>
<span>        plot.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>hjust <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'loan'. You can override using the
`.groups` argument.</code></pre>
</div>
</div>
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb43"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">gridExtra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/gridExtra/man/arrangeGrob.html">grid.arrange</a></span><span class="op">(</span><span class="va">plot_loan1</span>, <span class="va">plot_loan2</span>, nrow <span class="op">=</span><span class="fl">1</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="2022-11-24-Predict-Possible-Clients_files/figure-html/unnamed-chunk-23-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-3-7" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-7-tab">
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb44"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">plot_contact1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">bank_dataset</span>, </span>
<span>       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">contact</span>, </span>
<span>           fill <span class="op">=</span> <span class="va">y</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>        <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_hue.html">scale_fill_hue</a></span><span class="op">(</span>c <span class="op">=</span> <span class="fl">40</span><span class="op">)</span> <span class="op">+</span></span>
<span>        <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_bw</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span>position <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/position_dodge.html">position_dodge</a></span><span class="op">(</span>preserve <span class="op">=</span> <span class="st">"single"</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb45"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">plot_contact2</span> <span class="op">=</span> <span class="va">bank_dataset</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">contact</span>, <span class="va">y</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>pct <span class="op">=</span> <span class="va">n</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span>,</span>
<span>         lbl <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/percent_format.html">percent</a></span><span class="op">(</span><span class="va">pct</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">contact</span>,</span>
<span>           y <span class="op">=</span> <span class="va">pct</span>,</span>
<span>           fill <span class="op">=</span> <span class="va">y</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"identity"</span>,</span>
<span>           position <span class="op">=</span> <span class="st">"fill"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html">geom_text</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="va">lbl</span><span class="op">)</span>, </span>
<span>            size <span class="op">=</span> <span class="fl">3</span>, </span>
<span>            position <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/position_stack.html">position_stack</a></span><span class="op">(</span>vjust <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html">scale_fill_brewer</a></span><span class="op">(</span>palette <span class="op">=</span> <span class="st">"Set2"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>y <span class="op">=</span> <span class="st">"Percent"</span>, </span>
<span>       fill <span class="op">=</span> <span class="st">"Interested"</span>,</span>
<span>       x <span class="op">=</span> <span class="st">"Class"</span>,</span>
<span>       title <span class="op">=</span> <span class="st">"Forms of contact"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_classic</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"none"</span>,</span>
<span>        axis.text.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>angle <span class="op">=</span> <span class="fl">30</span>, vjust <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span>,</span>
<span>        plot.caption <span class="op">=</span> <span class="fu"><a href="https://wilkelab.org/ggtext/reference/element_markdown.html">element_markdown</a></span><span class="op">(</span>lineheight <span class="op">=</span> <span class="fl">1.2</span><span class="op">)</span>,</span>
<span>        plot.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>hjust <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'contact'. You can override using the
`.groups` argument.</code></pre>
</div>
</div>
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb47"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">gridExtra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/gridExtra/man/arrangeGrob.html">grid.arrange</a></span><span class="op">(</span><span class="va">plot_contact1</span>, <span class="va">plot_contact2</span>, nrow <span class="op">=</span><span class="fl">1</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="2022-11-24-Predict-Possible-Clients_files/figure-html/unnamed-chunk-26-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-3-8" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-8-tab">
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb48"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">plot_month1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">bank_dataset</span>, </span>
<span>       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">month</span>, level <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'jan'</span>, <span class="st">'feb'</span>, <span class="st">'mar'</span>, <span class="st">'apr'</span>,<span class="st">'may'</span>,<span class="st">'jun'</span>,<span class="st">'jul'</span>,<span class="st">'aug'</span>,<span class="st">'sep'</span>, <span class="st">'oct'</span>, <span class="st">'nov'</span>, <span class="st">'dec'</span><span class="op">)</span><span class="op">)</span>, </span>
<span>           fill <span class="op">=</span> <span class="va">y</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_hue.html">scale_fill_hue</a></span><span class="op">(</span>c <span class="op">=</span> <span class="fl">40</span><span class="op">)</span> <span class="op">+</span></span>
<span>       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_bw</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span>position <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/position_dodge.html">position_dodge</a></span><span class="op">(</span>preserve <span class="op">=</span> <span class="st">"single"</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb49"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">plot_month2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">bank_dataset</span>, </span>
<span>       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">month</span>, level <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'jan'</span>, <span class="st">'feb'</span>, <span class="st">'mar'</span>, <span class="st">'apr'</span>,<span class="st">'may'</span>,<span class="st">'jun'</span>,<span class="st">'jul'</span>,<span class="st">'aug'</span>,<span class="st">'sep'</span>, <span class="st">'oct'</span>, <span class="st">'nov'</span>, <span class="st">'dec'</span><span class="op">)</span><span class="op">)</span>, fill <span class="op">=</span> <span class="va">y</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span>position <span class="op">=</span> <span class="st">"fill"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html">scale_fill_brewer</a></span><span class="op">(</span>palette <span class="op">=</span> <span class="st">"Set2"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb50"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">gridExtra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/gridExtra/man/arrangeGrob.html">grid.arrange</a></span><span class="op">(</span><span class="va">plot_month1</span>, <span class="va">plot_month2</span>, nrow <span class="op">=</span><span class="fl">1</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="2022-11-24-Predict-Possible-Clients_files/figure-html/unnamed-chunk-29-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-3-9" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-9-tab">
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb51"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">plot_poutcome1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">bank_dataset</span>, </span>
<span>       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">poutcome</span>, </span>
<span>           fill <span class="op">=</span> <span class="va">y</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_hue.html">scale_fill_hue</a></span><span class="op">(</span>c <span class="op">=</span> <span class="fl">40</span><span class="op">)</span> <span class="op">+</span></span>
<span>       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_bw</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span>position <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/position_dodge.html">position_dodge</a></span><span class="op">(</span>preserve <span class="op">=</span> <span class="st">"single"</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb52"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">plot_poutcome2</span> <span class="op">=</span> <span class="va">bank_dataset</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">poutcome</span>, <span class="va">y</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>pct <span class="op">=</span> <span class="va">n</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span>,</span>
<span>         lbl <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/percent_format.html">percent</a></span><span class="op">(</span><span class="va">pct</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>   <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">poutcome</span>,</span>
<span>           y <span class="op">=</span> <span class="va">pct</span>,</span>
<span>           fill <span class="op">=</span> <span class="va">y</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"identity"</span>,</span>
<span>           position <span class="op">=</span> <span class="st">"fill"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html">geom_text</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="va">lbl</span><span class="op">)</span>, </span>
<span>            size <span class="op">=</span> <span class="fl">3</span>, </span>
<span>            position <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/position_stack.html">position_stack</a></span><span class="op">(</span>vjust <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html">scale_fill_brewer</a></span><span class="op">(</span>palette <span class="op">=</span> <span class="st">"Set2"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>y <span class="op">=</span> <span class="st">"Percent"</span>, </span>
<span>       fill <span class="op">=</span> <span class="st">"Interested"</span>,</span>
<span>       x <span class="op">=</span> <span class="st">"Class"</span>,</span>
<span>       title <span class="op">=</span> <span class="st">"Previous Campaign outcome"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_classic</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"none"</span>,</span>
<span>        axis.text.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>angle <span class="op">=</span> <span class="fl">30</span>, vjust <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span>,</span>
<span>        plot.caption <span class="op">=</span> <span class="fu"><a href="https://wilkelab.org/ggtext/reference/element_markdown.html">element_markdown</a></span><span class="op">(</span>lineheight <span class="op">=</span> <span class="fl">1.2</span><span class="op">)</span>,</span>
<span>        plot.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>hjust <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb53"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">gridExtra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/gridExtra/man/arrangeGrob.html">grid.arrange</a></span><span class="op">(</span><span class="va">plot_poutcome1</span>, <span class="va">plot_poutcome2</span>, nrow <span class="op">=</span><span class="fl">1</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="2022-11-24-Predict-Possible-Clients_files/figure-html/unnamed-chunk-32-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
</div>
</div>
</section><section id="quantitative-variables-1" class="level3"><h3 class="anchored" data-anchor-id="quantitative-variables-1">Quantitative variables</h3>
<div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-4-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-1" role="tab" aria-controls="tabset-4-1" aria-selected="true">Age</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-2" role="tab" aria-controls="tabset-4-2" aria-selected="false">Balance</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-3" role="tab" aria-controls="tabset-4-3" aria-selected="false">Duration</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-4" role="tab" aria-controls="tabset-4-4" aria-selected="false">Campaign</a></li>
</ul>
<div class="tab-content">
<div id="tabset-4-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-4-1-tab">
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb54"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">bank_dataset</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">y</span>, y<span class="op">=</span><span class="va">age</span>, fill<span class="op">=</span><span class="va">y</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">geom_boxplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_hue.html">scale_fill_hue</a></span><span class="op">(</span>c <span class="op">=</span> <span class="fl">40</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_classic</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span></span>
<span>     title <span class="op">=</span> <span class="st">"Age &amp; Desire of Bank Deposit Account"</span> </span>
<span>  <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="2022-11-24-Predict-Possible-Clients_files/figure-html/unnamed-chunk-33-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-4-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-2-tab">
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb55"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">plot1</span> <span class="op">=</span> <span class="va">bank_dataset</span><span class="op">[</span><span class="va">bank_dataset</span><span class="op">$</span><span class="va">balance</span> <span class="op">&lt;</span> <span class="fl">15000</span>, <span class="op">]</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">balance</span>, </span>
<span>           fill <span class="op">=</span> <span class="va">y</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>        <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_hue.html">scale_fill_hue</a></span><span class="op">(</span>c <span class="op">=</span> <span class="fl">40</span><span class="op">)</span> <span class="op">+</span></span>
<span>        <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_bw</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>bins<span class="op">=</span><span class="fl">15</span><span class="op">)</span></span>
<span></span>
<span><span class="va">plot1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="2022-11-24-Predict-Possible-Clients_files/figure-html/unnamed-chunk-34-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-4-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-3-tab">
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb56"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">bank_dataset</span>, </span>
<span>       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">duration</span>, </span>
<span>           fill <span class="op">=</span> <span class="va">y</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_hue.html">scale_fill_hue</a></span><span class="op">(</span>c <span class="op">=</span> <span class="fl">40</span><span class="op">)</span> <span class="op">+</span></span>
<span>       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_bw</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stderr">
<pre><code>`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
</div>
<div class="cell-output-display">
<p><img src="2022-11-24-Predict-Possible-Clients_files/figure-html/unnamed-chunk-35-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-4-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-4-tab">
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb58"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">bank_dataset</span>, </span>
<span>       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">campaign</span>, </span>
<span>           fill <span class="op">=</span> <span class="va">y</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_hue.html">scale_fill_hue</a></span><span class="op">(</span>c <span class="op">=</span> <span class="fl">40</span><span class="op">)</span> <span class="op">+</span></span>
<span>       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_bw</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stderr">
<pre><code>`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
</div>
<div class="cell-output-display">
<p><img src="2022-11-24-Predict-Possible-Clients_files/figure-html/unnamed-chunk-36-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
</div>
</div>
</section></section></section><section id="building-model" class="level1"><h1>Building model</h1>
<p>In R there are two fairly well-known libraries when it comes to model generation, <a href="https://topepo.github.io/caret/">caret</a> and <a href="https://www.tidymodels.org/">tidymodels</a>. On one hand, caret is pretty simple to use, has lots of sources, guides, explanatory articles. On the other hand, tidymodels is an all-in-one solution but has less documentation, articles compared to caret.</p>
<section id="split-traintest-dataset" class="level2"><h2 class="anchored" data-anchor-id="split-traintest-dataset">Split train/test dataset</h2>
<p>Our first step is to split our dataset on 2 parts. Each of those will be used for a different purpose. The first part’s (train dataset) purpose is to build our model. The other part (test dataset) will be used to evaluate our model’s performance.</p>
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb60"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span></span>
<span><span class="va">bank_dataset_split</span> <span class="op">&lt;-</span> <span class="fu">initial_split</span><span class="op">(</span><span class="va">bank_dataset</span>,</span>
<span>                                prop <span class="op">=</span> <span class="fl">0.75</span>,</span>
<span>                                strata <span class="op">=</span> <span class="va">y</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create training data</span></span>
<span><span class="va">bank_train</span> <span class="op">&lt;-</span> <span class="va">bank_dataset_split</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>                    <span class="fu">training</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create testing data</span></span>
<span><span class="va">bank_test</span> <span class="op">&lt;-</span> <span class="va">bank_dataset_split</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>                    <span class="fu">testing</span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-5-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-1" role="tab" aria-controls="tabset-5-1" aria-selected="true">Train dataset</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-2" role="tab" aria-controls="tabset-5-2" aria-selected="false">Test dataset</a></li>
</ul>
<div class="tab-content">
<div id="tabset-5-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-5-1-tab">
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb61"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">bank_train</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kbl.html">kbl</a></span><span class="op">(</span>toprule <span class="op">=</span> <span class="cn">T</span>,align <span class="op">=</span> <span class="st">'c'</span>,booktabs <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>  <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kable_styling.html">kable_styling</a></span><span class="op">(</span>full_width <span class="op">=</span> <span class="cn">F</span>, position <span class="op">=</span> <span class="st">"center"</span>, html_font <span class="op">=</span> <span class="st">"Cambria"</span><span class="op">)</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">

<table class="table" style="font-family: Cambria; width: auto !important; margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:center;"> age </th>
   <th style="text-align:center;"> job </th>
   <th style="text-align:center;"> marital </th>
   <th style="text-align:center;"> education </th>
   <th style="text-align:center;"> default </th>
   <th style="text-align:center;"> balance </th>
   <th style="text-align:center;"> housing </th>
   <th style="text-align:center;"> loan </th>
   <th style="text-align:center;"> contact </th>
   <th style="text-align:center;"> day </th>
   <th style="text-align:center;"> month </th>
   <th style="text-align:center;"> duration </th>
   <th style="text-align:center;"> campaign </th>
   <th style="text-align:center;"> pdays </th>
   <th style="text-align:center;"> previous </th>
   <th style="text-align:center;"> poutcome </th>
   <th style="text-align:center;"> y </th>
  </tr></thead>
<tbody>
<tr>
<td style="text-align:center;"> 30 </td>
   <td style="text-align:center;"> unemployed </td>
   <td style="text-align:center;"> married </td>
   <td style="text-align:center;"> primary </td>
   <td style="text-align:center;"> no </td>
   <td style="text-align:center;"> 1787 </td>
   <td style="text-align:center;"> no </td>
   <td style="text-align:center;"> no </td>
   <td style="text-align:center;"> cellular </td>
   <td style="text-align:center;"> 19 </td>
   <td style="text-align:center;"> oct </td>
   <td style="text-align:center;"> 79 </td>
   <td style="text-align:center;"> 1 </td>
   <td style="text-align:center;"> -1 </td>
   <td style="text-align:center;"> 0 </td>
   <td style="text-align:center;"> unknown </td>
   <td style="text-align:center;"> no </td>
  </tr>
<tr>
<td style="text-align:center;"> 33 </td>
   <td style="text-align:center;"> services </td>
   <td style="text-align:center;"> married </td>
   <td style="text-align:center;"> secondary </td>
   <td style="text-align:center;"> no </td>
   <td style="text-align:center;"> 4789 </td>
   <td style="text-align:center;"> yes </td>
   <td style="text-align:center;"> yes </td>
   <td style="text-align:center;"> cellular </td>
   <td style="text-align:center;"> 11 </td>
   <td style="text-align:center;"> may </td>
   <td style="text-align:center;"> 220 </td>
   <td style="text-align:center;"> 1 </td>
   <td style="text-align:center;"> 339 </td>
   <td style="text-align:center;"> 4 </td>
   <td style="text-align:center;"> failure </td>
   <td style="text-align:center;"> no </td>
  </tr>
<tr>
<td style="text-align:center;"> 30 </td>
   <td style="text-align:center;"> management </td>
   <td style="text-align:center;"> married </td>
   <td style="text-align:center;"> tertiary </td>
   <td style="text-align:center;"> no </td>
   <td style="text-align:center;"> 1476 </td>
   <td style="text-align:center;"> yes </td>
   <td style="text-align:center;"> yes </td>
   <td style="text-align:center;"> unknown </td>
   <td style="text-align:center;"> 3 </td>
   <td style="text-align:center;"> jun </td>
   <td style="text-align:center;"> 199 </td>
   <td style="text-align:center;"> 4 </td>
   <td style="text-align:center;"> -1 </td>
   <td style="text-align:center;"> 0 </td>
   <td style="text-align:center;"> unknown </td>
   <td style="text-align:center;"> no </td>
  </tr>
<tr>
<td style="text-align:center;"> 59 </td>
   <td style="text-align:center;"> blue-collar </td>
   <td style="text-align:center;"> married </td>
   <td style="text-align:center;"> secondary </td>
   <td style="text-align:center;"> no </td>
   <td style="text-align:center;"> 0 </td>
   <td style="text-align:center;"> yes </td>
   <td style="text-align:center;"> no </td>
   <td style="text-align:center;"> unknown </td>
   <td style="text-align:center;"> 5 </td>
   <td style="text-align:center;"> may </td>
   <td style="text-align:center;"> 226 </td>
   <td style="text-align:center;"> 1 </td>
   <td style="text-align:center;"> -1 </td>
   <td style="text-align:center;"> 0 </td>
   <td style="text-align:center;"> unknown </td>
   <td style="text-align:center;"> no </td>
  </tr>
<tr>
<td style="text-align:center;"> 36 </td>
   <td style="text-align:center;"> self-employed </td>
   <td style="text-align:center;"> married </td>
   <td style="text-align:center;"> tertiary </td>
   <td style="text-align:center;"> no </td>
   <td style="text-align:center;"> 307 </td>
   <td style="text-align:center;"> yes </td>
   <td style="text-align:center;"> no </td>
   <td style="text-align:center;"> cellular </td>
   <td style="text-align:center;"> 14 </td>
   <td style="text-align:center;"> may </td>
   <td style="text-align:center;"> 341 </td>
   <td style="text-align:center;"> 1 </td>
   <td style="text-align:center;"> 330 </td>
   <td style="text-align:center;"> 2 </td>
   <td style="text-align:center;"> other </td>
   <td style="text-align:center;"> no </td>
  </tr>
<tr>
<td style="text-align:center;"> 39 </td>
   <td style="text-align:center;"> technician </td>
   <td style="text-align:center;"> married </td>
   <td style="text-align:center;"> secondary </td>
   <td style="text-align:center;"> no </td>
   <td style="text-align:center;"> 147 </td>
   <td style="text-align:center;"> yes </td>
   <td style="text-align:center;"> no </td>
   <td style="text-align:center;"> cellular </td>
   <td style="text-align:center;"> 6 </td>
   <td style="text-align:center;"> may </td>
   <td style="text-align:center;"> 151 </td>
   <td style="text-align:center;"> 2 </td>
   <td style="text-align:center;"> -1 </td>
   <td style="text-align:center;"> 0 </td>
   <td style="text-align:center;"> unknown </td>
   <td style="text-align:center;"> no </td>
  </tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="tabset-5-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-2-tab">
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb62"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">bank_test</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kbl.html">kbl</a></span><span class="op">(</span>toprule <span class="op">=</span> <span class="cn">T</span>,align <span class="op">=</span> <span class="st">'c'</span>,booktabs <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>  <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kable_styling.html">kable_styling</a></span><span class="op">(</span>full_width <span class="op">=</span> <span class="cn">F</span>, position <span class="op">=</span> <span class="st">"center"</span>, html_font <span class="op">=</span> <span class="st">"Cambria"</span><span class="op">)</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">

<table class="table" style="font-family: Cambria; width: auto !important; margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:center;"> age </th>
   <th style="text-align:center;"> job </th>
   <th style="text-align:center;"> marital </th>
   <th style="text-align:center;"> education </th>
   <th style="text-align:center;"> default </th>
   <th style="text-align:center;"> balance </th>
   <th style="text-align:center;"> housing </th>
   <th style="text-align:center;"> loan </th>
   <th style="text-align:center;"> contact </th>
   <th style="text-align:center;"> day </th>
   <th style="text-align:center;"> month </th>
   <th style="text-align:center;"> duration </th>
   <th style="text-align:center;"> campaign </th>
   <th style="text-align:center;"> pdays </th>
   <th style="text-align:center;"> previous </th>
   <th style="text-align:center;"> poutcome </th>
   <th style="text-align:center;"> y </th>
  </tr></thead>
<tbody>
<tr>
<td style="text-align:center;"> 35 </td>
   <td style="text-align:center;"> management </td>
   <td style="text-align:center;"> single </td>
   <td style="text-align:center;"> tertiary </td>
   <td style="text-align:center;"> no </td>
   <td style="text-align:center;"> 1350 </td>
   <td style="text-align:center;"> yes </td>
   <td style="text-align:center;"> no </td>
   <td style="text-align:center;"> cellular </td>
   <td style="text-align:center;"> 16 </td>
   <td style="text-align:center;"> apr </td>
   <td style="text-align:center;"> 185 </td>
   <td style="text-align:center;"> 1 </td>
   <td style="text-align:center;"> 330 </td>
   <td style="text-align:center;"> 1 </td>
   <td style="text-align:center;"> failure </td>
   <td style="text-align:center;"> no </td>
  </tr>
<tr>
<td style="text-align:center;"> 35 </td>
   <td style="text-align:center;"> management </td>
   <td style="text-align:center;"> single </td>
   <td style="text-align:center;"> tertiary </td>
   <td style="text-align:center;"> no </td>
   <td style="text-align:center;"> 747 </td>
   <td style="text-align:center;"> no </td>
   <td style="text-align:center;"> no </td>
   <td style="text-align:center;"> cellular </td>
   <td style="text-align:center;"> 23 </td>
   <td style="text-align:center;"> feb </td>
   <td style="text-align:center;"> 141 </td>
   <td style="text-align:center;"> 2 </td>
   <td style="text-align:center;"> 176 </td>
   <td style="text-align:center;"> 3 </td>
   <td style="text-align:center;"> failure </td>
   <td style="text-align:center;"> no </td>
  </tr>
<tr>
<td style="text-align:center;"> 31 </td>
   <td style="text-align:center;"> blue-collar </td>
   <td style="text-align:center;"> married </td>
   <td style="text-align:center;"> secondary </td>
   <td style="text-align:center;"> no </td>
   <td style="text-align:center;"> 360 </td>
   <td style="text-align:center;"> yes </td>
   <td style="text-align:center;"> yes </td>
   <td style="text-align:center;"> cellular </td>
   <td style="text-align:center;"> 29 </td>
   <td style="text-align:center;"> jan </td>
   <td style="text-align:center;"> 89 </td>
   <td style="text-align:center;"> 1 </td>
   <td style="text-align:center;"> 241 </td>
   <td style="text-align:center;"> 1 </td>
   <td style="text-align:center;"> failure </td>
   <td style="text-align:center;"> no </td>
  </tr>
<tr>
<td style="text-align:center;"> 44 </td>
   <td style="text-align:center;"> services </td>
   <td style="text-align:center;"> single </td>
   <td style="text-align:center;"> secondary </td>
   <td style="text-align:center;"> no </td>
   <td style="text-align:center;"> 106 </td>
   <td style="text-align:center;"> no </td>
   <td style="text-align:center;"> no </td>
   <td style="text-align:center;"> unknown </td>
   <td style="text-align:center;"> 12 </td>
   <td style="text-align:center;"> jun </td>
   <td style="text-align:center;"> 109 </td>
   <td style="text-align:center;"> 2 </td>
   <td style="text-align:center;"> -1 </td>
   <td style="text-align:center;"> 0 </td>
   <td style="text-align:center;"> unknown </td>
   <td style="text-align:center;"> no </td>
  </tr>
<tr>
<td style="text-align:center;"> 45 </td>
   <td style="text-align:center;"> blue-collar </td>
   <td style="text-align:center;"> divorced </td>
   <td style="text-align:center;"> primary </td>
   <td style="text-align:center;"> no </td>
   <td style="text-align:center;"> 844 </td>
   <td style="text-align:center;"> no </td>
   <td style="text-align:center;"> no </td>
   <td style="text-align:center;"> unknown </td>
   <td style="text-align:center;"> 5 </td>
   <td style="text-align:center;"> jun </td>
   <td style="text-align:center;"> 1018 </td>
   <td style="text-align:center;"> 3 </td>
   <td style="text-align:center;"> -1 </td>
   <td style="text-align:center;"> 0 </td>
   <td style="text-align:center;"> unknown </td>
   <td style="text-align:center;"> yes </td>
  </tr>
<tr>
<td style="text-align:center;"> 37 </td>
   <td style="text-align:center;"> technician </td>
   <td style="text-align:center;"> single </td>
   <td style="text-align:center;"> secondary </td>
   <td style="text-align:center;"> no </td>
   <td style="text-align:center;"> 228 </td>
   <td style="text-align:center;"> yes </td>
   <td style="text-align:center;"> no </td>
   <td style="text-align:center;"> cellular </td>
   <td style="text-align:center;"> 20 </td>
   <td style="text-align:center;"> aug </td>
   <td style="text-align:center;"> 1740 </td>
   <td style="text-align:center;"> 2 </td>
   <td style="text-align:center;"> -1 </td>
   <td style="text-align:center;"> 0 </td>
   <td style="text-align:center;"> unknown </td>
   <td style="text-align:center;"> no </td>
  </tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</section><section id="recipes" class="level2"><h2 class="anchored" data-anchor-id="recipes">Recipes</h2>
<p>An important part in the process of model building is preprocessing. Depending of model type and data structure, I have to do the necessary changes. The <em>tidymodels</em> offers some ready-made preprocessing functions which make the whole process piece of cake.</p>
<p>In instance, the dataset I am working right now has imbalanced response variable (term deposit interest). For that reason, I used the recipe <code><a href="https://themis.tidymodels.org/reference/step_smote.html">step_smote()</a></code> from <em>themis</em> package.</p>
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb63"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">bank_recipe</span> <span class="op">&lt;-</span> <span class="fu">recipes</span><span class="fu">::</span><span class="fu"><a href="https://recipes.tidymodels.org/reference/recipe.html">recipe</a></span><span class="op">(</span><span class="va">y</span><span class="op">~</span><span class="va">.</span>, </span>
<span>                               data <span class="op">=</span> <span class="va">bank_train</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://recipes.tidymodels.org/reference/step_rm.html">step_rm</a></span><span class="op">(</span><span class="va">poutcome</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://recipes.tidymodels.org/reference/step_corr.html">step_corr</a></span><span class="op">(</span><span class="fu"><a href="https://recipes.tidymodels.org/reference/has_role.html">all_numeric</a></span><span class="op">(</span><span class="op">)</span>, threshold <span class="op">=</span> <span class="fl">0.75</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://recipes.tidymodels.org/reference/step_dummy.html">step_dummy</a></span><span class="op">(</span><span class="fu"><a href="https://recipes.tidymodels.org/reference/has_role.html">all_nominal</a></span><span class="op">(</span><span class="op">)</span>, <span class="op">-</span><span class="fu"><a href="https://recipes.tidymodels.org/reference/has_role.html">all_outcomes</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://recipes.tidymodels.org/reference/prep.html">prep</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://themis.tidymodels.org/reference/step_smote.html">step_smote</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://recipes.tidymodels.org/reference/prep.html">prep</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Let’s preview our dataset after applying our recipes :</p>
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb64"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">bank_recipe</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://recipes.tidymodels.org/reference/prep.html">prep</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://recipes.tidymodels.org/reference/juice.html">juice</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kbl.html">kbl</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kable_styling.html">kable_styling</a></span><span class="op">(</span>full_width <span class="op">=</span> <span class="cn">F</span>, position <span class="op">=</span> <span class="st">"center"</span>, html_font <span class="op">=</span> <span class="st">"Cambria"</span><span class="op">)</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div id="tbl-recipes-df" class="anchored">

<table class="table" style="font-family: Cambria; width: auto !important; margin-left: auto; margin-right: auto;">
<caption>Table&nbsp;1:  Dataset after recipes </caption>
 <thead><tr>
<th style="text-align:right;"> age </th>
   <th style="text-align:right;"> balance </th>
   <th style="text-align:right;"> day </th>
   <th style="text-align:right;"> duration </th>
   <th style="text-align:right;"> campaign </th>
   <th style="text-align:right;"> pdays </th>
   <th style="text-align:right;"> previous </th>
   <th style="text-align:right;"> job_blue.collar </th>
   <th style="text-align:right;"> job_entrepreneur </th>
   <th style="text-align:right;"> job_housemaid </th>
   <th style="text-align:right;"> job_management </th>
   <th style="text-align:right;"> job_retired </th>
   <th style="text-align:right;"> job_self.employed </th>
   <th style="text-align:right;"> job_services </th>
   <th style="text-align:right;"> job_student </th>
   <th style="text-align:right;"> job_technician </th>
   <th style="text-align:right;"> job_unemployed </th>
   <th style="text-align:right;"> job_unknown </th>
   <th style="text-align:right;"> marital_married </th>
   <th style="text-align:right;"> marital_single </th>
   <th style="text-align:right;"> education_secondary </th>
   <th style="text-align:right;"> education_tertiary </th>
   <th style="text-align:right;"> education_unknown </th>
   <th style="text-align:right;"> default_yes </th>
   <th style="text-align:right;"> housing_yes </th>
   <th style="text-align:right;"> loan_yes </th>
   <th style="text-align:right;"> contact_telephone </th>
   <th style="text-align:right;"> contact_unknown </th>
   <th style="text-align:right;"> month_aug </th>
   <th style="text-align:right;"> month_dec </th>
   <th style="text-align:right;"> month_feb </th>
   <th style="text-align:right;"> month_jan </th>
   <th style="text-align:right;"> month_jul </th>
   <th style="text-align:right;"> month_jun </th>
   <th style="text-align:right;"> month_mar </th>
   <th style="text-align:right;"> month_may </th>
   <th style="text-align:right;"> month_nov </th>
   <th style="text-align:right;"> month_oct </th>
   <th style="text-align:right;"> month_sep </th>
   <th style="text-align:left;"> y </th>
  </tr></thead>
<tbody>
<tr>
<td style="text-align:right;"> 30 </td>
   <td style="text-align:right;"> 1787 </td>
   <td style="text-align:right;"> 19 </td>
   <td style="text-align:right;"> 79 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> -1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:left;"> no </td>
  </tr>
<tr>
<td style="text-align:right;"> 33 </td>
   <td style="text-align:right;"> 4789 </td>
   <td style="text-align:right;"> 11 </td>
   <td style="text-align:right;"> 220 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 339 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:left;"> no </td>
  </tr>
<tr>
<td style="text-align:right;"> 30 </td>
   <td style="text-align:right;"> 1476 </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 199 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> -1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:left;"> no </td>
  </tr>
<tr>
<td style="text-align:right;"> 59 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 226 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> -1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:left;"> no </td>
  </tr>
<tr>
<td style="text-align:right;"> 36 </td>
   <td style="text-align:right;"> 307 </td>
   <td style="text-align:right;"> 14 </td>
   <td style="text-align:right;"> 341 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 330 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:left;"> no </td>
  </tr>
<tr>
<td style="text-align:right;"> 39 </td>
   <td style="text-align:right;"> 147 </td>
   <td style="text-align:right;"> 6 </td>
   <td style="text-align:right;"> 151 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> -1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:left;"> no </td>
  </tr>
</tbody>
</table>
</div>
</div>
</div>
</section><section id="create-validation-set" class="level2"><h2 class="anchored" data-anchor-id="create-validation-set">Create validation set</h2>
<blockquote class="blockquote">
<p>So, how good is the model? Not so fast…</p>
</blockquote>
<p>We could actually build the model and evaluate its performance. The problem with that approach is the sample.</p>
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb65"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">cv_folds</span> <span class="op">&lt;-</span> <span class="fu">recipes</span><span class="fu">::</span><span class="fu"><a href="https://recipes.tidymodels.org/reference/bake.html">bake</a></span><span class="op">(</span></span>
<span>  <span class="va">bank_recipe</span>,</span>
<span>  new_data <span class="op">=</span> <span class="va">bank_train</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">rsample</span><span class="fu">::</span><span class="fu"><a href="https://rsample.tidymodels.org/reference/vfold_cv.html">vfold_cv</a></span><span class="op">(</span>v <span class="op">=</span> <span class="fl">5</span>, strata <span class="op">=</span> <span class="va">y</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="specify-models" class="level2"><h2 class="anchored" data-anchor-id="specify-models">Specify models</h2>
<p>Next, parsnip helps us to specify our models. Initially, I will define a LightGBM model,</p>
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb66"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">lightgbm_model</span><span class="op">&lt;-</span> <span class="fu">parsnip</span><span class="fu">::</span><span class="fu"><a href="https://parsnip.tidymodels.org/reference/boost_tree.html">boost_tree</a></span><span class="op">(</span></span>
<span> mode <span class="op">=</span> <span class="st">"classification"</span>,</span>
<span> trees <span class="op">=</span> <span class="fl">100</span>,</span>
<span> min_n <span class="op">=</span> <span class="fu"><a href="https://hardhat.tidymodels.org/reference/tune.html">tune</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span> learn_rate <span class="op">=</span> <span class="fu"><a href="https://hardhat.tidymodels.org/reference/tune.html">tune</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span> tree_depth <span class="op">=</span> <span class="fu"><a href="https://hardhat.tidymodels.org/reference/tune.html">tune</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span><span class="fu"><a href="https://parsnip.tidymodels.org/reference/set_engine.html">set_engine</a></span><span class="op">(</span><span class="st">"lightgbm"</span>, loss_function <span class="op">=</span> <span class="st">"squarederror"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>and an XGBoost one.</p>
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb67"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">xgboost_model</span><span class="op">&lt;-</span> <span class="fu">parsnip</span><span class="fu">::</span><span class="fu"><a href="https://parsnip.tidymodels.org/reference/boost_tree.html">boost_tree</a></span><span class="op">(</span></span>
<span> mode <span class="op">=</span> <span class="st">"classification"</span>,</span>
<span> trees <span class="op">=</span> <span class="fl">100</span>,</span>
<span> min_n <span class="op">=</span> <span class="fu"><a href="https://hardhat.tidymodels.org/reference/tune.html">tune</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span> learn_rate <span class="op">=</span> <span class="fu"><a href="https://hardhat.tidymodels.org/reference/tune.html">tune</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span> tree_depth <span class="op">=</span> <span class="fu"><a href="https://hardhat.tidymodels.org/reference/tune.html">tune</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span> <span class="fu"><a href="https://parsnip.tidymodels.org/reference/set_engine.html">set_engine</a></span><span class="op">(</span><span class="st">"xgboost"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="hyperparameters-tuning" class="level2"><h2 class="anchored" data-anchor-id="hyperparameters-tuning">Hyperparameters tuning</h2>
<p>Now, we are specifying the hyperpaterers’ values and a grid to check whicη combination of those are performing better according to our desired metric (in our case ROC). This has to be done for both, LightGBM</p>
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb68"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">lightgbm_params</span> <span class="op">&lt;-</span> <span class="fu">dials</span><span class="fu">::</span><span class="fu"><a href="https://dials.tidymodels.org/reference/parameters.html">parameters</a></span><span class="op">(</span></span>
<span> <span class="fu">min_n</span><span class="op">(</span><span class="op">)</span>,</span>
<span> <span class="fu">tree_depth</span><span class="op">(</span>range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">4</span>,<span class="fl">10</span><span class="op">)</span><span class="op">)</span>,</span>
<span> <span class="fu">learn_rate</span><span class="op">(</span><span class="op">)</span> <span class="co"># learning rate</span></span>
<span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb69"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">lightgbm_grid</span> <span class="op">&lt;-</span> <span class="fu">dials</span><span class="fu">::</span><span class="fu"><a href="https://dials.tidymodels.org/reference/grid_max_entropy.html">grid_max_entropy</a></span><span class="op">(</span></span>
<span> <span class="va">lightgbm_params</span>,</span>
<span> size <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">lightgbm_grid</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kbl.html">kbl</a></span><span class="op">(</span>toprule <span class="op">=</span> <span class="cn">T</span>,align <span class="op">=</span> <span class="st">'c'</span>,booktabs <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>  <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kable_styling.html">kable_styling</a></span><span class="op">(</span>full_width <span class="op">=</span> <span class="cn">F</span>, position <span class="op">=</span> <span class="st">"center"</span>, html_font <span class="op">=</span> <span class="st">"Cambria"</span><span class="op">)</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">

<table class="table" style="font-family: Cambria; width: auto !important; margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:center;"> min_n </th>
   <th style="text-align:center;"> tree_depth </th>
   <th style="text-align:center;"> learn_rate </th>
  </tr></thead>
<tbody>
<tr>
<td style="text-align:center;"> 3 </td>
   <td style="text-align:center;"> 5 </td>
   <td style="text-align:center;"> 0.00 </td>
  </tr>
<tr>
<td style="text-align:center;"> 3 </td>
   <td style="text-align:center;"> 7 </td>
   <td style="text-align:center;"> 0.00 </td>
  </tr>
<tr>
<td style="text-align:center;"> 11 </td>
   <td style="text-align:center;"> 10 </td>
   <td style="text-align:center;"> 0.00 </td>
  </tr>
<tr>
<td style="text-align:center;"> 33 </td>
   <td style="text-align:center;"> 4 </td>
   <td style="text-align:center;"> 0.08 </td>
  </tr>
<tr>
<td style="text-align:center;"> 10 </td>
   <td style="text-align:center;"> 5 </td>
   <td style="text-align:center;"> 0.01 </td>
  </tr>
<tr>
<td style="text-align:center;"> 31 </td>
   <td style="text-align:center;"> 9 </td>
   <td style="text-align:center;"> 0.00 </td>
  </tr>
</tbody>
</table>
</div>
</div>
<p>and XGBoost.</p>
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb70"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">xgboost_params</span> <span class="op">&lt;-</span> <span class="fu">dials</span><span class="fu">::</span><span class="fu"><a href="https://dials.tidymodels.org/reference/parameters.html">parameters</a></span><span class="op">(</span></span>
<span> <span class="fu">min_n</span><span class="op">(</span><span class="op">)</span>,</span>
<span> <span class="fu">tree_depth</span><span class="op">(</span>range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">4</span>,<span class="fl">10</span><span class="op">)</span><span class="op">)</span>,</span>
<span> <span class="fu">learn_rate</span><span class="op">(</span><span class="op">)</span> <span class="co"># learning rate</span></span>
<span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb71"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">xgboost_grid</span> <span class="op">&lt;-</span> <span class="fu">dials</span><span class="fu">::</span><span class="fu"><a href="https://dials.tidymodels.org/reference/grid_max_entropy.html">grid_max_entropy</a></span><span class="op">(</span></span>
<span>  <span class="va">xgboost_params</span>,</span>
<span>  size <span class="op">=</span> <span class="fl">10</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">xgboost_grid</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kbl.html">kbl</a></span><span class="op">(</span>toprule <span class="op">=</span> <span class="cn">T</span>,align <span class="op">=</span> <span class="st">'c'</span>,booktabs <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>  <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kable_styling.html">kable_styling</a></span><span class="op">(</span>full_width <span class="op">=</span> <span class="cn">F</span>, position <span class="op">=</span> <span class="st">"center"</span>, html_font <span class="op">=</span> <span class="st">"Cambria"</span><span class="op">)</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">

<table class="table" style="font-family: Cambria; width: auto !important; margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:center;"> min_n </th>
   <th style="text-align:center;"> tree_depth </th>
   <th style="text-align:center;"> learn_rate </th>
  </tr></thead>
<tbody>
<tr>
<td style="text-align:center;"> 5 </td>
   <td style="text-align:center;"> 6 </td>
   <td style="text-align:center;"> 0.00 </td>
  </tr>
<tr>
<td style="text-align:center;"> 4 </td>
   <td style="text-align:center;"> 8 </td>
   <td style="text-align:center;"> 0.00 </td>
  </tr>
<tr>
<td style="text-align:center;"> 37 </td>
   <td style="text-align:center;"> 9 </td>
   <td style="text-align:center;"> 0.00 </td>
  </tr>
<tr>
<td style="text-align:center;"> 2 </td>
   <td style="text-align:center;"> 5 </td>
   <td style="text-align:center;"> 0.00 </td>
  </tr>
<tr>
<td style="text-align:center;"> 21 </td>
   <td style="text-align:center;"> 9 </td>
   <td style="text-align:center;"> 0.01 </td>
  </tr>
<tr>
<td style="text-align:center;"> 21 </td>
   <td style="text-align:center;"> 5 </td>
   <td style="text-align:center;"> 0.05 </td>
  </tr>
</tbody>
</table>
</div>
</div>
</section><section id="fit-resamples" class="level2"><h2 class="anchored" data-anchor-id="fit-resamples">Fit resamples</h2>
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb72"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># build workflow for LightGBM</span></span>
<span></span>
<span><span class="va">lightgbm_workflow</span> <span class="op">&lt;-</span> <span class="fu">workflows</span><span class="fu">::</span><span class="fu"><a href="https://workflows.tidymodels.org/reference/workflow.html">workflow</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span> <span class="fu">add_model</span><span class="op">(</span><span class="va">lightgbm_model</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span> <span class="fu">add_formula</span><span class="op">(</span><span class="va">y</span> <span class="op">~</span><span class="va">.</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb73"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># build workflow for XGBoost</span></span>
<span></span>
<span><span class="va">xgboost_workflow</span> <span class="op">&lt;-</span> <span class="fu">workflows</span><span class="fu">::</span><span class="fu"><a href="https://workflows.tidymodels.org/reference/workflow.html">workflow</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">add_model</span><span class="op">(</span><span class="va">xgboost_model</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">add_formula</span><span class="op">(</span><span class="va">y</span><span class="op">~</span><span class="va">.</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Finally, we can build the LightGBM model by combining :</p>
<ul>
<li>The workflows we set it up above</li>
<li>The resamples</li>
<li>Grid of values (hyperparameters)</li>
<li>Metric based on which we will evaluate our model’s performance</li>
</ul>
<div class="cell" data-hash="2022-11-24-Predict-Possible-Clients_cache/html/unnamed-chunk-51_f72e4363837a1d13d0553bc5bed886bc">
<details><summary>Show the code</summary><div class="sourceCode" id="cb74"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">start_time_lightgbm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html">Sys.time</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">lightgbm_tuned_model</span> <span class="op">&lt;-</span> <span class="fu">tune</span><span class="fu">::</span><span class="fu"><a href="https://tune.tidymodels.org/reference/tune_grid.html">tune_grid</a></span><span class="op">(</span></span>
<span> object <span class="op">=</span> <span class="va">lightgbm_workflow</span>,</span>
<span> resamples <span class="op">=</span> <span class="va">cv_folds</span>,</span>
<span> metrics <span class="op">=</span> <span class="fu">metric_set</span><span class="op">(</span><span class="va">roc_auc</span>, <span class="va">accuracy</span><span class="op">)</span>,</span>
<span> grid <span class="op">=</span> <span class="va">lightgbm_grid</span>,</span>
<span> control <span class="op">=</span> <span class="fu">tune</span><span class="fu">::</span><span class="fu"><a href="https://tune.tidymodels.org/reference/control_grid.html">control_grid</a></span><span class="op">(</span>verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="co"># set this to TRUE to see</span></span>
<span> <span class="co"># in what step of the process you are. But that doesn't look that well in</span></span>
<span> <span class="co"># a blog.</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">end_time_lightgbm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html">Sys.time</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">time_lightgbm</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/difftime.html">difftime</a></span><span class="op">(</span><span class="va">end_time_lightgbm</span>,<span class="va">start_time_lightgbm</span>,units <span class="op">=</span> <span class="st">"secs"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Similarly, for XGBoost.</p>
<div class="cell" data-hash="2022-11-24-Predict-Possible-Clients_cache/html/unnamed-chunk-52_efe99a2aee8e97668cdc9d9b157bcfd1">
<details><summary>Show the code</summary><div class="sourceCode" id="cb75"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">start_time_xgboost</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html">Sys.time</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">xgboost_tuned_model</span> <span class="op">&lt;-</span> <span class="fu">tune</span><span class="fu">::</span><span class="fu"><a href="https://tune.tidymodels.org/reference/tune_grid.html">tune_grid</a></span><span class="op">(</span></span>
<span> object <span class="op">=</span> <span class="va">xgboost_workflow</span>,</span>
<span> resamples <span class="op">=</span> <span class="va">cv_folds</span>,</span>
<span> metrics <span class="op">=</span> <span class="fu">metric_set</span><span class="op">(</span><span class="va">roc_auc</span>, <span class="va">accuracy</span><span class="op">)</span>,</span>
<span> grid <span class="op">=</span> <span class="va">xgboost_grid</span>,</span>
<span> control <span class="op">=</span> <span class="fu">tune</span><span class="fu">::</span><span class="fu"><a href="https://tune.tidymodels.org/reference/control_grid.html">control_grid</a></span><span class="op">(</span>verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="co"># set this to TRUE to see</span></span>
<span> <span class="co"># in what step of the process you are. But that doesn't look that well in</span></span>
<span> <span class="co"># a blog.</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">end_time_xgboost</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html">Sys.time</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">time_xgboost</span><span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/difftime.html">difftime</a></span><span class="op">(</span><span class="va">end_time_xgboost</span>,<span class="va">start_time_xgboost</span>,units <span class="op">=</span> <span class="st">"secs"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="evaluate-model" class="level2"><h2 class="anchored" data-anchor-id="evaluate-model">Evaluate model</h2>
<p>Our first results based on resamples for LightGBM</p>
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb76"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">lightgbm_tuned_model</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">show_best</span><span class="op">(</span><span class="st">"roc_auc"</span>,n<span class="op">=</span><span class="fl">5</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kbl.html">kbl</a></span><span class="op">(</span>toprule <span class="op">=</span> <span class="cn">T</span>,align <span class="op">=</span> <span class="st">'c'</span>,booktabs <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>  <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kable_styling.html">kable_styling</a></span><span class="op">(</span>full_width <span class="op">=</span> <span class="cn">F</span>, position <span class="op">=</span> <span class="st">"center"</span>, html_font <span class="op">=</span> <span class="st">"Cambria"</span><span class="op">)</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">

<table class="table" style="font-family: Cambria; width: auto !important; margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:center;"> min_n </th>
   <th style="text-align:center;"> tree_depth </th>
   <th style="text-align:center;"> learn_rate </th>
   <th style="text-align:center;"> .metric </th>
   <th style="text-align:center;"> .estimator </th>
   <th style="text-align:center;"> mean </th>
   <th style="text-align:center;"> n </th>
   <th style="text-align:center;"> std_err </th>
   <th style="text-align:center;"> .config </th>
  </tr></thead>
<tbody>
<tr>
<td style="text-align:center;"> 33 </td>
   <td style="text-align:center;"> 4 </td>
   <td style="text-align:center;"> 0.08 </td>
   <td style="text-align:center;"> roc_auc </td>
   <td style="text-align:center;"> binary </td>
   <td style="text-align:center;"> 0.90 </td>
   <td style="text-align:center;"> 5 </td>
   <td style="text-align:center;"> 0.01 </td>
   <td style="text-align:center;"> Preprocessor1_Model04 </td>
  </tr>
<tr>
<td style="text-align:center;"> 16 </td>
   <td style="text-align:center;"> 10 </td>
   <td style="text-align:center;"> 0.06 </td>
   <td style="text-align:center;"> roc_auc </td>
   <td style="text-align:center;"> binary </td>
   <td style="text-align:center;"> 0.90 </td>
   <td style="text-align:center;"> 5 </td>
   <td style="text-align:center;"> 0.01 </td>
   <td style="text-align:center;"> Preprocessor1_Model10 </td>
  </tr>
<tr>
<td style="text-align:center;"> 10 </td>
   <td style="text-align:center;"> 5 </td>
   <td style="text-align:center;"> 0.01 </td>
   <td style="text-align:center;"> roc_auc </td>
   <td style="text-align:center;"> binary </td>
   <td style="text-align:center;"> 0.89 </td>
   <td style="text-align:center;"> 5 </td>
   <td style="text-align:center;"> 0.01 </td>
   <td style="text-align:center;"> Preprocessor1_Model05 </td>
  </tr>
<tr>
<td style="text-align:center;"> 34 </td>
   <td style="text-align:center;"> 10 </td>
   <td style="text-align:center;"> 0.00 </td>
   <td style="text-align:center;"> roc_auc </td>
   <td style="text-align:center;"> binary </td>
   <td style="text-align:center;"> 0.86 </td>
   <td style="text-align:center;"> 5 </td>
   <td style="text-align:center;"> 0.01 </td>
   <td style="text-align:center;"> Preprocessor1_Model07 </td>
  </tr>
<tr>
<td style="text-align:center;"> 29 </td>
   <td style="text-align:center;"> 6 </td>
   <td style="text-align:center;"> 0.00 </td>
   <td style="text-align:center;"> roc_auc </td>
   <td style="text-align:center;"> binary </td>
   <td style="text-align:center;"> 0.86 </td>
   <td style="text-align:center;"> 5 </td>
   <td style="text-align:center;"> 0.01 </td>
   <td style="text-align:center;"> Preprocessor1_Model09 </td>
  </tr>
</tbody>
</table>
</div>
</div>
<p>and XGBoost</p>
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb77"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">xgboost_tuned_model</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">show_best</span><span class="op">(</span><span class="st">"roc_auc"</span>,n<span class="op">=</span><span class="fl">5</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kbl.html">kbl</a></span><span class="op">(</span>toprule <span class="op">=</span> <span class="cn">T</span>,align <span class="op">=</span> <span class="st">'c'</span>,booktabs <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>  <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kable_styling.html">kable_styling</a></span><span class="op">(</span>full_width <span class="op">=</span> <span class="cn">F</span>, position <span class="op">=</span> <span class="st">"center"</span>, html_font <span class="op">=</span> <span class="st">"Cambria"</span><span class="op">)</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">

<table class="table" style="font-family: Cambria; width: auto !important; margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:center;"> min_n </th>
   <th style="text-align:center;"> tree_depth </th>
   <th style="text-align:center;"> learn_rate </th>
   <th style="text-align:center;"> .metric </th>
   <th style="text-align:center;"> .estimator </th>
   <th style="text-align:center;"> mean </th>
   <th style="text-align:center;"> n </th>
   <th style="text-align:center;"> std_err </th>
   <th style="text-align:center;"> .config </th>
  </tr></thead>
<tbody>
<tr>
<td style="text-align:center;"> 21 </td>
   <td style="text-align:center;"> 5 </td>
   <td style="text-align:center;"> 0.05 </td>
   <td style="text-align:center;"> roc_auc </td>
   <td style="text-align:center;"> binary </td>
   <td style="text-align:center;"> 0.88 </td>
   <td style="text-align:center;"> 5 </td>
   <td style="text-align:center;"> 0.01 </td>
   <td style="text-align:center;"> Preprocessor1_Model06 </td>
  </tr>
<tr>
<td style="text-align:center;"> 21 </td>
   <td style="text-align:center;"> 9 </td>
   <td style="text-align:center;"> 0.01 </td>
   <td style="text-align:center;"> roc_auc </td>
   <td style="text-align:center;"> binary </td>
   <td style="text-align:center;"> 0.85 </td>
   <td style="text-align:center;"> 5 </td>
   <td style="text-align:center;"> 0.01 </td>
   <td style="text-align:center;"> Preprocessor1_Model05 </td>
  </tr>
<tr>
<td style="text-align:center;"> 5 </td>
   <td style="text-align:center;"> 6 </td>
   <td style="text-align:center;"> 0.00 </td>
   <td style="text-align:center;"> roc_auc </td>
   <td style="text-align:center;"> binary </td>
   <td style="text-align:center;"> 0.84 </td>
   <td style="text-align:center;"> 5 </td>
   <td style="text-align:center;"> 0.01 </td>
   <td style="text-align:center;"> Preprocessor1_Model01 </td>
  </tr>
<tr>
<td style="text-align:center;"> 40 </td>
   <td style="text-align:center;"> 5 </td>
   <td style="text-align:center;"> 0.00 </td>
   <td style="text-align:center;"> roc_auc </td>
   <td style="text-align:center;"> binary </td>
   <td style="text-align:center;"> 0.83 </td>
   <td style="text-align:center;"> 5 </td>
   <td style="text-align:center;"> 0.01 </td>
   <td style="text-align:center;"> Preprocessor1_Model08 </td>
  </tr>
<tr>
<td style="text-align:center;"> 19 </td>
   <td style="text-align:center;"> 7 </td>
   <td style="text-align:center;"> 0.00 </td>
   <td style="text-align:center;"> roc_auc </td>
   <td style="text-align:center;"> binary </td>
   <td style="text-align:center;"> 0.83 </td>
   <td style="text-align:center;"> 5 </td>
   <td style="text-align:center;"> 0.01 </td>
   <td style="text-align:center;"> Preprocessor1_Model07 </td>
  </tr>
</tbody>
</table>
</div>
</div>
</section><section id="last-fit" class="level2"><h2 class="anchored" data-anchor-id="last-fit">Last fit</h2>
<p>By now we can assess which is the best combination of values. Given those I will assess my model’s performance on unknown (to my model) data. LightGBM model has 0.8469 ROC-value</p>
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb78"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">last_fit_lightgbm_model</span> <span class="op">=</span> <span class="fu">parsnip</span><span class="fu">::</span><span class="fu"><a href="https://parsnip.tidymodels.org/reference/boost_tree.html">boost_tree</a></span><span class="op">(</span></span>
<span> mode <span class="op">=</span> <span class="st">"classification"</span>,</span>
<span> trees <span class="op">=</span> <span class="fl">100</span>,</span>
<span> min_n <span class="op">=</span> <span class="fl">33</span>,</span>
<span> learn_rate <span class="op">=</span> <span class="fl">0.0787</span>,</span>
<span> tree_depth <span class="op">=</span> <span class="fl">4</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span><span class="fu"><a href="https://parsnip.tidymodels.org/reference/set_engine.html">set_engine</a></span><span class="op">(</span><span class="st">"lightgbm"</span>, loss_function <span class="op">=</span> <span class="st">"squarederror"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb79"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html">options</a></span><span class="op">(</span>digits <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span>
<span></span>
<span><span class="va">last_fit_workflow</span> <span class="op">&lt;-</span> <span class="va">lightgbm_workflow</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">update_model</span><span class="op">(</span><span class="va">last_fit_lightgbm_model</span><span class="op">)</span></span>
<span></span>
<span><span class="va">last_lightgbm_fit</span> <span class="op">&lt;-</span> </span>
<span>  <span class="va">last_fit_workflow</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">last_fit</span><span class="op">(</span><span class="va">bank_dataset_split</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stderr">
<pre><code>! train/test split: preprocessor 1/1, model 1/1: NAs introduced by coercion</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>! train/test split: preprocessor 1/1, model 1/1 (predictions): NAs introduced by coercion</code></pre>
</div>
<details><summary>Show the code</summary><div class="sourceCode" id="cb82"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">last_lightgbm_fit</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">collect_metrics</span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kbl.html">kbl</a></span><span class="op">(</span>toprule <span class="op">=</span> <span class="cn">T</span>,align <span class="op">=</span> <span class="st">'c'</span>,booktabs <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>  <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kable_styling.html">kable_styling</a></span><span class="op">(</span>full_width <span class="op">=</span> <span class="cn">F</span>, position <span class="op">=</span> <span class="st">"center"</span>, html_font <span class="op">=</span> <span class="st">"Cambria"</span><span class="op">)</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">

<table class="table" style="font-family: Cambria; width: auto !important; margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:center;"> .metric </th>
   <th style="text-align:center;"> .estimator </th>
   <th style="text-align:center;"> .estimate </th>
   <th style="text-align:center;"> .config </th>
  </tr></thead>
<tbody>
<tr>
<td style="text-align:center;"> accuracy </td>
   <td style="text-align:center;"> binary </td>
   <td style="text-align:center;"> 0.8815 </td>
   <td style="text-align:center;"> Preprocessor1_Model1 </td>
  </tr>
<tr>
<td style="text-align:center;"> roc_auc </td>
   <td style="text-align:center;"> binary </td>
   <td style="text-align:center;"> 0.8458 </td>
   <td style="text-align:center;"> Preprocessor1_Model1 </td>
  </tr>
</tbody>
</table>
</div>
</div>
<p>and XGBoost, 0.8736.</p>
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb83"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">last_fit_xgboost_model</span> <span class="op">=</span> <span class="fu">parsnip</span><span class="fu">::</span><span class="fu"><a href="https://parsnip.tidymodels.org/reference/boost_tree.html">boost_tree</a></span><span class="op">(</span></span>
<span> mode <span class="op">=</span> <span class="st">"classification"</span>,</span>
<span> trees <span class="op">=</span> <span class="fl">100</span>,</span>
<span> min_n <span class="op">=</span> <span class="fl">21</span>,</span>
<span> learn_rate <span class="op">=</span> <span class="fl">0.0472</span>,</span>
<span> tree_depth <span class="op">=</span> <span class="fl">5</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span><span class="fu"><a href="https://parsnip.tidymodels.org/reference/set_engine.html">set_engine</a></span><span class="op">(</span><span class="st">"xgboost"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details><summary>Show the code</summary><div class="sourceCode" id="cb84"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html">options</a></span><span class="op">(</span>digits <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span>
<span></span>
<span><span class="va">last_fit_xgboost_workflow</span> <span class="op">&lt;-</span> <span class="va">xgboost_workflow</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">update_model</span><span class="op">(</span><span class="va">last_fit_xgboost_model</span><span class="op">)</span></span>
<span></span>
<span><span class="va">last_xgboost_fit</span> <span class="op">&lt;-</span> </span>
<span>  <span class="va">last_fit_xgboost_workflow</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">last_fit</span><span class="op">(</span><span class="va">bank_dataset_split</span><span class="op">)</span></span>
<span></span>
<span><span class="va">last_xgboost_fit</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">collect_metrics</span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kbl.html">kbl</a></span><span class="op">(</span>toprule <span class="op">=</span> <span class="cn">T</span>,align <span class="op">=</span> <span class="st">'c'</span>,booktabs <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>  <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kable_styling.html">kable_styling</a></span><span class="op">(</span>full_width <span class="op">=</span> <span class="cn">F</span>, position <span class="op">=</span> <span class="st">"center"</span>, html_font <span class="op">=</span> <span class="st">"Cambria"</span><span class="op">)</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">

<table class="table" style="font-family: Cambria; width: auto !important; margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:center;"> .metric </th>
   <th style="text-align:center;"> .estimator </th>
   <th style="text-align:center;"> .estimate </th>
   <th style="text-align:center;"> .config </th>
  </tr></thead>
<tbody>
<tr>
<td style="text-align:center;"> accuracy </td>
   <td style="text-align:center;"> binary </td>
   <td style="text-align:center;"> 0.8957 </td>
   <td style="text-align:center;"> Preprocessor1_Model1 </td>
  </tr>
<tr>
<td style="text-align:center;"> roc_auc </td>
   <td style="text-align:center;"> binary </td>
   <td style="text-align:center;"> 0.8702 </td>
   <td style="text-align:center;"> Preprocessor1_Model1 </td>
  </tr>
</tbody>
</table>
</div>
</div>
</section></section><section id="results" class="level1"><h1>Results</h1>
<p>It seems that my model has a really good predictive value even if I applied a relatively simple model. If an increased accuracy is justified we can apply a more powerful model (e.g., XGBoost, CatBoost, etc.).</p>
<p>To summarize,</p>
<table class="table">
<thead><tr class="header">
<th style="text-align: center;">Model</th>
<th style="text-align: center;">Time to build</th>
<th style="text-align: center;">ROC value (test)</th>
<th style="text-align: center;">ROC value (CV)</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">LightGBM</td>
<td style="text-align: center;">51.76 sec.</td>
<td style="text-align: center;">0.8469</td>
<td style="text-align: center;">0.903</td>
</tr>
<tr class="even">
<td style="text-align: center;">XGBoost</td>
<td style="text-align: center;">87.64 sec.</td>
<td style="text-align: center;">0.8736</td>
<td style="text-align: center;">0.881</td>
</tr>
</tbody>
</table>
<p>In conclusion LightGBM model is less time xonsuming in comparison with XGBoost. On the other hand, XGBoost model needed more time to be built (which was expected) but outperformed LightGBM.</p>
</section><div id="quarto-appendix" class="default"><section id="acknowledgements" class="level1 appendix unlisted"><h2 class="quarto-appendix-heading">Acknowledgements</h2><div class="quarto-appendix-contents">
<p>Image by <a href="https://pixabay.com/users/geralt-9301/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=563967">Gerd Altmann</a> from <a href="https://pixabay.com//?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=563967">Pixabay</a></p>
</div></section><section id="references" class="level1 appendix unlisted"><h2 class="quarto-appendix-heading"></h2><div class="quarto-appendix-contents">



</div></section><section class="quarto-appendix-contents" role="doc-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-line-spacing="2" role="doc-bibliography">
<div id="ref-R-gridExtra" class="csl-entry" role="doc-biblioentry">
Auguie, B. (2017). <em>gridExtra: Miscellaneous functions for "grid" graphics</em>. Retrieved from <a href="https://CRAN.R-project.org/package=gridExtra">https://CRAN.R-project.org/package=gridExtra</a>
</div>
<div id="ref-R-infer" class="csl-entry" role="doc-biblioentry">
Bray, A., Ismay, C., Chasnovski, E., Couch, S., Baumer, B., &amp; Cetinkaya-Rundel, M. (2022). <em>Infer: Tidy statistical inference</em>. Retrieved from <a href="https://CRAN.R-project.org/package=infer">https://CRAN.R-project.org/package=infer</a>
</div>
<div id="ref-infer2021" class="csl-entry" role="doc-biblioentry">
Couch, S. P., Bray, A. P., Ismay, C., Chasnovski, E., Baumer, B. S., &amp; Çetinkaya-Rundel, M. (2021). <span class="nocase">infer</span>: An <span>R</span> package for tidyverse-friendly statistical inference. <em>Journal of Open Source Software</em>, <em>6</em>(65), 3661. <a href="https://doi.org/10.21105/joss.03661">https://doi.org/10.21105/joss.03661</a>
</div>
<div id="ref-Dua2019" class="csl-entry" role="doc-biblioentry">
Dua, D., &amp; Graff, C. (2017). <em><span>UCI</span> machine learning repository</em>. University of California, Irvine, School of Information; Computer Sciences. Retrieved from <a href="http://archive.ics.uci.edu/ml">http://archive.ics.uci.edu/ml</a>
</div>
<div id="ref-R-bonsai" class="csl-entry" role="doc-biblioentry">
Falbel, D., Damiani, A., Hogervorst, R. M., Kuhn, M., &amp; Couch, S. (2022). <em>Bonsai: Model wrappers for tree-based models</em>. Retrieved from <a href="https://CRAN.R-project.org/package=bonsai">https://CRAN.R-project.org/package=bonsai</a>
</div>
<div id="ref-R-purrr" class="csl-entry" role="doc-biblioentry">
Henry, L., &amp; Wickham, H. (2020). <em>Purrr: Functional programming tools</em>. Retrieved from <a href="https://CRAN.R-project.org/package=purrr">https://CRAN.R-project.org/package=purrr</a>
</div>
<div id="ref-R-themis" class="csl-entry" role="doc-biblioentry">
Hvitfeldt, E. (2022). <em>Themis: Extra recipes steps for dealing with unbalanced data</em>. Retrieved from <a href="https://CRAN.R-project.org/package=themis">https://CRAN.R-project.org/package=themis</a>
</div>
<div id="ref-R-fontawesome" class="csl-entry" role="doc-biblioentry">
Iannone, R. (2022). <em>Fontawesome: Easily work with font awesome icons</em>. Retrieved from <a href="https://CRAN.R-project.org/package=fontawesome">https://CRAN.R-project.org/package=fontawesome</a>
</div>
<div id="ref-kabacoff2019data" class="csl-entry" role="doc-biblioentry">
Kabacoff, R. (2019). Data visualization with r. <em>URL Https://Rkabacoff. Github. Io/Datavis</em>.
</div>
<div id="ref-Kirenz2021" class="csl-entry" role="doc-biblioentry">
Kirenz, J. (2021). Classification with tidymodels, workflows and recipes. Retrieved November 22, 2022, from <a href="https://www.kirenz.com/post/2021-02-17-r-classification-tidymodels/#data-preparation">https://www.kirenz.com/post/2021-02-17-r-classification-tidymodels/#data-preparation</a>
</div>
<div id="ref-R-modeldata" class="csl-entry" role="doc-biblioentry">
Kuhn, M. (2022a). <em>Modeldata: Data sets useful for modeling examples</em>. Retrieved from <a href="https://CRAN.R-project.org/package=modeldata">https://CRAN.R-project.org/package=modeldata</a>
</div>
<div id="ref-R-tune" class="csl-entry" role="doc-biblioentry">
Kuhn, M. (2022b). <em>Tune: Tidy tuning tools</em>. Retrieved from <a href="https://CRAN.R-project.org/package=tune">https://CRAN.R-project.org/package=tune</a>
</div>
<div id="ref-R-workflowsets" class="csl-entry" role="doc-biblioentry">
Kuhn, M., &amp; Couch, S. (2022). <em>Workflowsets: Create a collection of tidymodels workflows</em>. Retrieved from <a href="https://CRAN.R-project.org/package=workflowsets">https://CRAN.R-project.org/package=workflowsets</a>
</div>
<div id="ref-R-dials" class="csl-entry" role="doc-biblioentry">
Kuhn, M., &amp; Frick, H. (2022). <em>Dials: Tools for creating tuning parameter values</em>. Retrieved from <a href="https://CRAN.R-project.org/package=dials">https://CRAN.R-project.org/package=dials</a>
</div>
<div id="ref-R-parsnip" class="csl-entry" role="doc-biblioentry">
Kuhn, M., &amp; Vaughan, D. (2022). <em>Parsnip: A common API to modeling and analysis functions</em>. Retrieved from <a href="https://CRAN.R-project.org/package=parsnip">https://CRAN.R-project.org/package=parsnip</a>
</div>
<div id="ref-R-yardstick" class="csl-entry" role="doc-biblioentry">
Kuhn, M., Vaughan, D., &amp; Hvitfeldt, E. (2022). <em>Yardstick: Tidy characterizations of model performance</em>. Retrieved from <a href="https://CRAN.R-project.org/package=yardstick">https://CRAN.R-project.org/package=yardstick</a>
</div>
<div id="ref-tidymodels2020" class="csl-entry" role="doc-biblioentry">
Kuhn, M., &amp; Wickham, H. (2020). <em>Tidymodels: A collection of packages for modeling and machine learning using tidyverse principles.</em> Retrieved from <a href="https://www.tidymodels.org">https://www.tidymodels.org</a>
</div>
<div id="ref-R-recipes" class="csl-entry" role="doc-biblioentry">
Kuhn, M., &amp; Wickham, H. (2022a). <em>Recipes: Preprocessing and feature engineering steps for modeling</em>. Retrieved from <a href="https://CRAN.R-project.org/package=recipes">https://CRAN.R-project.org/package=recipes</a>
</div>
<div id="ref-R-tidymodels" class="csl-entry" role="doc-biblioentry">
Kuhn, M., &amp; Wickham, H. (2022b). <em>Tidymodels: Easily install and load the tidymodels packages</em>. Retrieved from <a href="https://CRAN.R-project.org/package=tidymodels">https://CRAN.R-project.org/package=tidymodels</a>
</div>
<div id="ref-moro2014data" class="csl-entry" role="doc-biblioentry">
Moro, S., Cortez, P., &amp; Rita, P. (2014). A data-driven approach to predict the success of bank telemarketing. <em>Decision Support Systems</em>, <em>62</em>, 22–31.
</div>
<div id="ref-R-tibble" class="csl-entry" role="doc-biblioentry">
Müller, K., &amp; Wickham, H. (2022). <em>Tibble: Simple data frames</em>. Retrieved from <a href="https://CRAN.R-project.org/package=tibble">https://CRAN.R-project.org/package=tibble</a>
</div>
<div id="ref-R-base" class="csl-entry" role="doc-biblioentry">
R Core Team. (2021). <em>R: A language and environment for statistical computing</em>. Vienna, Austria: R Foundation for Statistical Computing. Retrieved from <a href="https://www.R-project.org/">https://www.R-project.org/</a>
</div>
<div id="ref-Rbloggers2017" class="csl-entry" role="doc-biblioentry">
R-Bloggers. (2017). 5 ways to measure running time of r code. Retrieved November 20, 2022, from <a href="https://www.r-bloggers.com/2017/05/5-ways-to-measure-running-time-of-r-code/">https://www.r-bloggers.com/2017/05/5-ways-to-measure-running-time-of-r-code/</a>
</div>
<div id="ref-Rbloggers2020" class="csl-entry" role="doc-biblioentry">
R-Bloggers. (2020). How to use lightgbm with tidymodels. Retrieved November 20, 2022, from <a href="https://www.r-bloggers.com/2020/08/how-to-use-lightgbm-with-tidymodels/">https://www.r-bloggers.com/2020/08/how-to-use-lightgbm-with-tidymodels/</a>
</div>
<div id="ref-R-broom" class="csl-entry" role="doc-biblioentry">
Robinson, D., Hayes, A., &amp; Couch, S. (2022). <em>Broom: Convert statistical objects into tidy tibbles</em>. Retrieved from <a href="https://CRAN.R-project.org/package=broom">https://CRAN.R-project.org/package=broom</a>
</div>
<div id="ref-R-rsample" class="csl-entry" role="doc-biblioentry">
Silge, J., Chow, F., Kuhn, M., &amp; Wickham, H. (2022). <em>Rsample: General resampling infrastructure</em>. Retrieved from <a href="https://CRAN.R-project.org/package=rsample">https://CRAN.R-project.org/package=rsample</a>
</div>
<div id="ref-R-workflows" class="csl-entry" role="doc-biblioentry">
Vaughan, D., &amp; Couch, S. (2022). <em>Workflows: Modeling workflows</em>. Retrieved from <a href="https://CRAN.R-project.org/package=workflows">https://CRAN.R-project.org/package=workflows</a>
</div>
<div id="ref-ggplot22016" class="csl-entry" role="doc-biblioentry">
Wickham, H. (2016). <em>ggplot2: Elegant graphics for data analysis</em>. Springer-Verlag New York. Retrieved from <a href="https://ggplot2.tidyverse.org">https://ggplot2.tidyverse.org</a>
</div>
<div id="ref-R-forcats" class="csl-entry" role="doc-biblioentry">
Wickham, H. (2022). <em>Forcats: Tools for working with categorical variables (factors)</em>. Retrieved from <a href="https://CRAN.R-project.org/package=forcats">https://CRAN.R-project.org/package=forcats</a>
</div>
<div id="ref-R-ggplot2" class="csl-entry" role="doc-biblioentry">
Wickham, H., Chang, W., Henry, L., Pedersen, T. L., Takahashi, K., Wilke, C., … Dunnington, D. (2022). <em>ggplot2: Create elegant data visualisations using the grammar of graphics</em>. Retrieved from <a href="https://CRAN.R-project.org/package=ggplot2">https://CRAN.R-project.org/package=ggplot2</a>
</div>
<div id="ref-R-dplyr" class="csl-entry" role="doc-biblioentry">
Wickham, H., François, R., Henry, L., &amp; Müller, K. (2022). <em>Dplyr: A grammar of data manipulation</em>. Retrieved from <a href="https://CRAN.R-project.org/package=dplyr">https://CRAN.R-project.org/package=dplyr</a>
</div>
<div id="ref-R-tidyr" class="csl-entry" role="doc-biblioentry">
Wickham, H., &amp; Girlich, M. (2022). <em>Tidyr: Tidy messy data</em>. Retrieved from <a href="https://CRAN.R-project.org/package=tidyr">https://CRAN.R-project.org/package=tidyr</a>
</div>
<div id="ref-R-readr" class="csl-entry" role="doc-biblioentry">
Wickham, H., Hester, J., &amp; Bryan, J. (2022). <em>Readr: Read rectangular text data</em>. Retrieved from <a href="https://CRAN.R-project.org/package=readr">https://CRAN.R-project.org/package=readr</a>
</div>
<div id="ref-R-scales" class="csl-entry" role="doc-biblioentry">
Wickham, H., &amp; Seidel, D. (2022). <em>Scales: Scale functions for visualization</em>. Retrieved from <a href="https://CRAN.R-project.org/package=scales">https://CRAN.R-project.org/package=scales</a>
</div>
<div id="ref-R-ggtext" class="csl-entry" role="doc-biblioentry">
Wilke, C. O., &amp; Wiernik, B. M. (2022). <em>Ggtext: Improved text rendering support for ggplot2</em>. Retrieved from <a href="https://wilkelab.org/ggtext/">https://wilkelab.org/ggtext/</a>
</div>
<div id="ref-R-kableExtra" class="csl-entry" role="doc-biblioentry">
Zhu, H. (2021). <em>kableExtra: Construct complex table with kable and pipe syntax</em>. Retrieved from <a href="https://CRAN.R-project.org/package=kableExtra">https://CRAN.R-project.org/package=kableExtra</a>
</div>
</div></section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{stesiam2022,
  author = {stesiam},
  title = {Predict {Possible} {Interested} {Clients}},
  date = {2022-11-24},
  url = {https://www.stesiam.github.io/2022-11-24-Predict-Possible-Clients.html},
  langid = {en}
}
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-stesiam2022" class="csl-entry quarto-appendix-citeas" role="doc-biblioentry">
stesiam. (2022, November 24). Predict Possible Interested Clients.
Retrieved from <a href="https://www.stesiam.github.io/2022-11-24-Predict-Possible-Clients.html">https://www.stesiam.github.io/2022-11-24-Predict-Possible-Clients.html</a>
</div></div></section></div></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><script src="https://giscus.app/client.js" data-repo="stesiam/stesiam.github.io" data-repo-id="R_kgDOHuiNDg" data-category="Comments" data-category-id="DIC_kwDOHuiNDs4CQeAf" data-mapping="title" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="light" data-lang="en" crossorigin="anonymous" async="">
</script>
</div> <!-- /content -->



</body></html>